<!--
    1. ì„¤ê³„ëŒ€ë¡œ ì½”ë”©í•˜ë‹¤ ë³´ë©´ ë” ì¶”ìƒí™” í•  ìˆ˜ ìˆì„ ë•ŒëŠ” ì–´ë–»ê²Œí•´ì•¼í•˜ëŠ”ê°€?
    2. ì„¤ê³„ëŒ€ë¡œ ì½”ë”©í•˜ë‹¤ê°€ ë” ì¢‹ì€ ìƒê°ì´ ë‚˜ë©´ ì–´ë–»ê²Œ í•´ì•¼í•˜ëŠ”ê°€?
    3. ì„¤ê³„ëŒ€ë¡œ ì½”ë”©í•˜ë‹¤ê°€ ë°˜ë³µë˜ëŠ” ì½”ë“œê°€ ë³´ì´ë©´ ì–´ë–»ê²Œ í•´ì•¼í•˜ëŠ”ê°€?
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #myApp {
            justify-content: center;
            align-items: center;
            display: flex;
        }
        #btnArea {
            margin: 0 auto;
        }
        #greedyBtn {
            border: 3px solid red;
            background-color: red;
            border-radius: 10px;
        }
        .area {
            float : left;
            display : inline;
        }

        .textArea {
            width: 20em;
            height: 20em;
        }
        .btn {
            border: 3px solid yellowgreen;
            background-color: green;
            border-radius: 10px;
        }
        .title {
            text-align: center;
        }
        .addBtnArea {       
            margin-left : 4em;
            position: relative;     
            display: inline;
        }
        body {
            background-image: url("img/greedy2.png");
        }
        option {
            font-style: italic;
            font-size: 20px;
            margin-top: 18px;
            margin-bottom: 18px;
            text-align: center;
        }
    </style>
</head>

<body>
    <h1 class="title">ì •ì„ì½”ë”© Quiz3</h1>


    <h2 class="title">ìŒì‹ ì¶”ê°€í•˜ê¸° ğŸ˜‹</h2>

    <div class="addBtnArea">
        <input id = "leftInput" type="text">
        <button class="btn" value="í•˜ëŠ˜" onclick="add('leftInput')">ì§±êµ¬ì—ê²Œ ìŒì‹ ì¶”ê°€</button>
    </div>

    <div class="addBtnArea">
        <input id = "rightInput" type="text">
        <button class="btn" value ="ì—¬ëŠ˜" onclick="add('rightInput')">ì—¬ëŠ˜ì—ê²Œ ìŒì‹ ì¶”ê°€</button>
    </div>
    
    <br>
    <h2 class="title">ìŒì‹ í…Œì´ë¸” í˜„í™© ğŸ½ï¸</h2>
    <!-- 3ë¶„í•  -->
    <div id="myApp"ì¶•êµ¬>
        <!-- 1. ì„ íƒì§€ ì˜µì…˜ -->
        <div class = "area">
            <h1 class="title">ì§±êµ¬ ğŸ™‹ğŸ»â€â™‚ï¸</h1>
            <select id= "leftArea" class = "textArea" multiple>
                <option value="ğŸ¥“" class="item" onclick="select(this)">ğŸ¥“</option>
                <option value="ğŸ—" class="item" onclick="select(this)">ğŸ—</option>
                <option value="ğŸ–" class="item" onclick="select(this)">ğŸ–</option>
                <option value="ğŸ•" class="item" onclick="select(this)">ğŸ•</option>
            </select>
        </div>


        <!-- 2. ë³€í˜• ë²„íŠ¼ -->
        <div id = "btnArea" class = "area">
            <butoon style="display: block;" value="moveRight" onclick="moveSelected('right')" class="btn">></butoon>
            <br>
            <butoon style="display: block;" value="moveLeft" onclick="moveSelected('left')" class="btn"><</butoon>
            <br>
            <butoon style="display: block;" onclick="moveAll('right')" class="btn">>></butoon>
            <br>
            <butoon style="display: block;" onclick="moveAll('left')" class="btn"><<</butoon>
        </div>

        <!-- 3. ì˜ì—­ì— ë„ì›Œì£¼ê¸° -->
        <div class = "area">
            <h1 class="title">ì—¬ëŠ˜ ğŸ™‹ğŸ»</h1>
            <select id= "rightArea" class="textArea" multiple>
                
            </select>
        </div>
    </div>

    <h2 class="title">ìš•ì‹¬ìŸì´ëŠ”?!</h2>
        <!-- ì•„ì´í…œ ì…ë ¥ -->
        <div class="title">
            <button id="greedyBtn" onclick="getGreedy()">ì¶œë ¥</button>
        </div>
    <script>
        // ì„ íƒëœ ì•„ì´í…œ ë‹´ê¸°
        let selectedItems = [];

        // 3ê°€ì§€ ê¸°ëŠ¥ - ì„ íƒ, ì˜®ê¹€, ì¶œë ¥ 
            // 1. ì„ íƒ âœ…
        function select(e) {
            // ì„ íƒí•œ ê²ƒë“¤ ë°°ì—´ì— ë‹´ì•„ì£¼ê¸°
            selectedItems.push(e.value);
        }

            // 2. ì„ íƒí•œ ê²ƒë“¤ë§Œ ì˜®ê¹€
                // 2-1. ì„ íƒí•œ ê²ƒë“¤ì„ ì™¼ìª½ -> ì˜¤ë¥¸ìª½ 

                // 2-2. ì„ íƒí•œ ê²ƒë“¤ì„ ì˜¤ë¥¸ìª½ -> ì™¼ìª½ 
        function moveSelected(direction) {
            // ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ ëˆŒë¦° ê²½ìš°
            if (direction === "right") {
                moveSelectedLeftToRight();
            }
            // ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ ëˆŒë¦° ê²½ìš°
            else if (direction === "left") {
                moveSelectedRightToLeft();
            }
        }

        function moveSelectedLeftToRight() {
            // 1. ì™¼ìª½ ì˜ì—­, ì˜¤ë¥¸ìª½ ì˜ì—­ ì°¸ì¡°
            const leftAreaNodes = document.getElementById("leftArea").childNodes;

            let rightInnerHTML = "";
            let leftInnerHTML = "";
            
            // 2. ì„ íƒí•œ ì• ë“¤ë§Œ ì˜®ê¹€ (ì™¼ìª½ -> ì˜¤ë¥¸ìª½)
            for (node of leftAreaNodes) {
                if (typeof node.value === "undefined") {
                    continue;
                }
                const target = node.value;
                if (selectedItems.indexOf(target) === -1) {
                    leftInnerHTML += `<option value=${target} class ='item' onclick="select(this)">${target}</option>`;
                } else if (selectedItems.indexOf(target) !== -1) {
                    rightInnerHTML += `<option value=${target} class = 'item' onclick="select(this)">${target}</option>`;
                }
            }

            // 3. ì—…ë°ì´íŠ¸ 
            update(leftInnerHTML, rightInnerHTML, "right");
        }

        function moveSelectedRightToLeft() {
            // 1. ì™¼ìª½ ì˜ì—­, ì˜¤ë¥¸ìª½ ì˜ì—­ ì°¸ì¡°
            const rightAreaNodes = document.getElementById("rightArea").childNodes;

            let rightInnerHTML = "";
            let leftInnerHTML = "";
            // 2. ì„ íƒí•œ ì• ë“¤ë§Œ ì˜®ê¹€ (ì˜¤ë¥¸ìª½ -> ì™¼ìª½)
            for (node of rightAreaNodes) {
                if (typeof node.value === "undefined" ) continue;
    
                const target = node.value;
                if (selectedItems.indexOf(target) === -1) {
                    rightInnerHTML += `<option value=${target} class = 'item' onclick="select(this)">${target}</option>`;
                } else if (selectedItems.indexOf(target) !== -1) {
                    leftInnerHTML += `<option value=${target} class = 'item' onclick="select(this)">${target}</option>`;
                }
            }

            // 3. ì—…ë°ì´íŠ¸ 
            update(leftInnerHTML, rightInnerHTML, "left");
        }
            
            // 3. ëª¨ë“  ê²ƒë“¤ì„ ì˜®ê¹€
                // 3-1. ëª¨ë“ ê²ƒë“¤ì„ ì™¼ìª½ -> ì˜¤ë¥¸ìª½

                // 3-2. ëª¨ë“ ê²ƒë“¤ì„ ì˜¤ë¥¸ìª½ -> ì™¼ìª½
        function moveAll(direction) {
            // 1. ì™¼ìª½ ì˜ì—­, ì˜¤ë¥¸ìª½ ì˜ì—­ ì°¸ì¡°

            // 2. ëª¨ë“  ì• ë“¤ ì˜®ê¹€ 
                // 2-1. ì™¼ìª½ -> ì˜¤ë¥¸ìª½

                // 2-2. ì˜¤ë¥¸ì¡± -> ì™¼ìª½
            if (direction === "right") {
                moveAllLeftToRight();
            } else if (direction === "left") {
                moveAllRightToLeft();
            }
        }

        function moveAllLeftToRight() {
            // 1. ì™¼ì¡± ì˜ì—­, ì˜¤ë¥¸ì¡± ì˜ì—­ ì°¸ì¡°
            const leftAreaNodes = document.getElementById("leftArea").childNodes;

            let rightInnerHTML = "";
            // 2. ëª¨ë“  ì• ë“¤ ì˜®ê¹€(ì™¼ìª½ -> ì˜¤ë¥¸ìª½)
            for (node of leftAreaNodes) {
                if (typeof node === "undefined" || typeof node.value === "undefined") continue;
                const target = node.value;
                rightInnerHTML += `<option value=${target} class = 'item' onclick="select(this)">${target}</option>`;
            }

            // 3. ì—…ë°ì´íŠ¸ 
            update("", rightInnerHTML, "right");
        }

        function moveAllRightToLeft() {
            // 1. ì™¼ìª½ ì˜ì—­, ì˜¤ë¥¸ì¡± ì˜ì—­ ì°¸ì¡°
            const rightAreaNodes = document.getElementById("rightArea").childNodes;

            let leftInnerHTML = "";
            // 2. ëª¨ë“  ì• ë“¤ ì˜®ê¹€(ì˜¤ë¥¸ìª½ -> ì™¼ìª½)
            for (node of rightAreaNodes) {
                if (typeof node === "undefined" || typeof node.value === "undefined") continue;
                const target = node.value;
                leftInnerHTML += `<option value=${target} class = 'item' onclick="select(this)">${target}</option>`;
            }

            // 3. ì—…ë°ì´íŠ¸
            update(leftInnerHTML, "", "left");

        }
            // 4. ê° ì˜ì—­ì— ë³´ì—¬ì£¼ê¸°
                // 4-1. ì™¼ìª½ ê²ƒë“¤ ì¶œë ¥
                // 4-2. ì˜¤ë¥¸ìª½ ê²ƒë“¤ ì¶œë ¥ 
        function update(leftInnerHTML = "", rightInnerHTML = "", direction) {
            const leftArea = document.getElementById("leftArea");
            const rightArea = document.getElementById("rightArea");

            if (direction === "left") {
                leftArea.innerHTML += leftInnerHTML;
                rightArea.innerHTML = rightInnerHTML;
            } else if (direction === "right") {
                leftArea.innerHTML = leftInnerHTML;
                rightArea.innerHTML += rightInnerHTML;
            }

            selectedItems = [];
        }

        // ì‚¬ìš©ìê°€ ì…ë ¥í•œê±° ì¶”ê°€
        function add(direction) {
            // ì™¼ìª½(í•˜ëŠ˜)ì— ì¶”ê°€í•˜ëŠ” ê²½ìš°
            if (direction === "leftInput") {
                addLeft(direction);
            }
            else if (direction === "rightInput") {
                // ì˜¤ë¥¸ì¡±(ì—¬ëŠ˜)ì— ì¶”ê°€í•˜ëŠ” ê²½ìš°
                addRight(direction);
            }
        }

        // ì™¼ìª½(í•˜ëŠ˜)ì— ì¶”ê°€
        function addLeft(direction) {
            // 1. ì°¸ì¡°
            const leftArea = document.getElementById("leftArea");
            const target = document.getElementById(direction).value;
            // const target = document.getElementById(direction).textContent;

            // 2. ì¶”ê°€
            leftArea.innerHTML +=  `<option value=${target} class = 'item' onclick="select(this)">${target}</option>`;
        }

        // ì˜¤ë¥¸ìª½(ì—¬ëŠ˜)ì— ì¶”ê°€
        function addRight(direction) {
            // 1. ì°¸ì¡°
            const rightArea = document.getElementById("rightArea");
            const target = document.getElementById(direction).value;

            // 2. ì¶”ê°€
            rightArea.innerHTML += `<option value=${target} class = 'item' onclick="select(this)">${target}</option>`;
        }

        // ì•„ì´í…œì´ ë§ì€ ì•  alert()ë¡œ ì¶œë ¥í•˜ê¸°
        function getGreedy() {
            const leftAreaLength = document.getElementById("leftArea").childNodes.length;
            const rightAreaLength = document.getElementById("rightArea").childNodes.length;

            if (leftAreaLength > rightAreaLength) {
                alert("ì§±êµ¬ğŸ¤·ğŸ»â€â™‚ï¸ê°€ ìš•ì‹¬ìŸì´êµ°!!");
            } else if (leftAreaLength < rightAreaLength) {
                alert("ì—¬ëŠ˜ğŸ¤·ğŸ»ì´ê°€ ìš•ì‹¬ìŸì´êµ°!!");
            } else {
                alert("ë­ì•¼?! ë„ì°ê°œì°ì´ë„¤");
            }
        }
        
    </script>
</body>
</html>