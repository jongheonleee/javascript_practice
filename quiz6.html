<!--ì¹´ë“œ ê²Œì„-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            background-image: url("img/poker.png");
        }
        img {
            margin-top: 5px;
            margin-bottom: 5px;
            margin-left: 2px;
            margin-right: 2px;
            width: 100px;
            height: 100px;
        }
        #container {
            display: grid;
            grid-template-columns: 1fr 3fr 1fr;
        }
        #gameArea {
            text-align: center;
            display: inline;
            margin-top: 0;
            margin-bottom: 0;
            margin-left: 10em;
            margin-right: 10em;
        }
        #btnArea {
            text-align: center
        }
        button {
            display: inline-block;
            margin: 0;
            padding: 0;
            position: relative;
            border: none;
            min-width: 200px;
            min-height: 50px;
            background: linear-gradient(
                90deg,
                rgba(129, 230, 217, 1) 0%,
                rgba(79, 209, 197, 1) 100%
            );
            border-radius: 1000px;
            color: darkslategray;
            cursor: pointer;
            box-shadow: 12px 12px 24px rgba(79, 209, 197, 0.64);
            font-weight: 700;
            transition: 0.3s;
        }
        #firstPlayerArea {
            text-align: center;
            display: inline;
        }
        #secondPlayerArea {
            text-align: center;
            display: inline;
        }
        #playerRecordArea {
            display: inline;
        }
        #playerArea {
            display: inline;
        }

        .title {
            color: white;
            font-style: italic;
            font-size : 25px;
            display: inline;
        }
        #leftPlayerArea {
            float : left;
        }
        #rightPlayerArea {
            float : right;
        }
        
    </style>
</head>
<!--<div class="playerArea">-->
<body>
    <span id="leftPlayerArea">
        <div id="firstPlayerArea">
            <h2 class="title"></h2>
            <br>
        </div>
    </span>
    <span id="rightPlayerArea">
        <div id="secondPlayerArea">
            <h2 class="title"></h2>
            <br>
        </div>
    </span>
    
    

    <div id="gameArea">
        <div id="cardArea"></div>
    </div>


    <div id="btnArea">
        <button onclick="selectFirstPlayer()">
            í”Œë ˆì´ì–´1 ì‹œì‘
        </button>
    
        <button onclick="getGameResult()">
            ê²Œì„ ê²°ê³¼ ì¶œë ¥ 
        </button>
    
        <button onclick="selectSecondPlayer()">
            í”Œë ˆì´ì–´2 ì‹œì‘
        </button>
    </div>

    <script>
        // 2ì°¨ ì„¤ê³„ë„(ì—…ë°ì´íŠ¸ í•´ì•¼í•¨)
            
            // ê°ì²´ ì„¤ê³„ 
                // 1. ì¹´ë“œ ê°ì²´ âœ…
                    // iv -> cardImageNumber, state
                        // cardImageNumber : ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì 
                        // state : ìƒíƒœ(ì•ë©´/ë’·ë©´)

                    // im -> isFront(), getNumber(), getShape(), getColor(), getCardImageNumber(), isSameNumberAndColor(), isSameNumber(), isSameColor(), isSameCardImageNumber(), flip(), getState();
                        // isFront() : ì•ë©´ì¸ì§€ ì‘ë‹µ 
                        // getNumber() : ì¹´ë“œ ìˆ«ì ë°˜í™˜
                        // getShape() : ì¹´ë“œ ë¬¸ì–‘ ë°˜í™˜
                        // getColor() : ì¹´ë“œ ìƒ‰ê¹” ë°˜í™˜ 
                        // getCardImageNumber() : ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì ë°˜í™˜
                        // isSameNumberAndColor() : ë‹¤ë¥¸ ì¹´ë“œì˜ ìˆ«ìì™€ ìƒ‰ê¹”ì´ ëª‡ ê°œ ë§ì•˜ëŠ”ì§€ ë°˜í™˜, (0, 1, 2)
                        // isSameNumber() : ë‹¤ë¥¸ ì¹´ë“œì˜ ìˆ«ìì™€ ë§ëŠ”ì§€ ë°˜í™˜ (0, 1)
                        // isSameColor() : ë‹¤ë¥¸ ì¹´ë“œì˜ ìƒ‰ê¹”ê³¼ ë§ëŠ”ì§€ ë°˜í™˜ (0, 1) 
                        // isSameCardImageNumber() : ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ìì™€ ê°™ì€ì§€ ë°˜í™˜
                        // flip() : ì¹´ë“œ ëŒë¦¬ê¸°
                        // getState() : ì¹´ë“œ ìƒíƒœ(ì•ë©´, ë’·ë©´) ë°˜í™˜

                

                // 2. í”Œë ˆì´ì–´ ê°ì²´ âœ…
                    // iv -> name, score, leftCount
                        // name : ì´ë¦„
                        // score : ì ìˆ˜
                        // leftCount : ë‚¨ì€ íšŸìˆ˜(ê¸°ë³¸ê°’ 15ë²ˆ)

                    // im -> isWinner(), getName(), isLeftCount(), addScore(), getScore(), decreaseCount()
                        // isWinner() : ë‹¤ë¥¸ í”Œë ˆì´ì–´ì™€ ì ìˆ˜ ë¹„êµí•´ì„œ ì´ê²¼ëŠ”ì§€ ì¡ŒëŠ”ì§€ ë¬´ìŠ¹ë¶€ì¸ì§€ íŒë‹¨(-1, 1, 0)
                        // getName() : í”Œë ˆì´ì–´ ì´ë¦„ ë°˜í™˜ 
                        // isLeftCount() : í”Œë ˆì´ì–´ì˜ ê²Œì„ íŒìˆ˜ê°€ ìˆëŠ”ì§€ ì‘ë‹µ
                        // addScore() : ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ì–‘ë§Œí¼ ìì‹ ì˜ ìŠ¤ì½”ì–´ ì ìˆ˜ì— ë”í•¨
                        // getScore() : í”Œë ˆì´ì–´ ì ìˆ˜ë¥¼ ë°˜í™˜
                        // decreaseCount() : í”Œë ˆì´ì–´ì˜ ê²Œì„ íŒìˆ˜ì—ì„œ 1ì„ ëºŒ
                
                // 3. ê²Œì„ ê²°ê³¼ ê°ì²´ âœ…
                    // iv -> gameResultInfo
                        // gameResultInfo : ìë£Œêµ¬ì¡° ë§µ, ìˆ«ì ê²°ê³¼ì™€ ë©”ì‹œì§€ ê²°ê³¼ë¥¼ ë§¤ì¹­ì‹œì¼œì„œ ì €ì¥

                    // im -> translateMessage() 
                        // translateMessage() : ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ìˆ«ì ê²°ê³¼ë¥¼ ë©”ì‹œì§€ ê²°ê³¼ë¡œ í•´ì„í•´ì„œ ë°˜í™˜

                // 4. ê²Œì„ ë§¤ë‹ˆì € ê°ì²´ âœ…
                    // iv -> cardImageNumbers, cardShapes, cards, currentPlayerSelectedCards, firstPlayer, secondPlayer, currentPlayer, gameResult
                        // cardImageNumbers : ë°°ì—´, ì¹´ë“œì˜ ì´ë¯¸ì§€ ìˆ«ì ì •ë³´ ì €ì¥
                        // cardShapes : ë°°ì—´, ì¹´ë“œì˜ ë¬¸ì–‘ì„ ê° ê° ë¬¸ìì—´ë¡œ ì €ì¥
                        // cards : ë°°ì—´, Card ê°ì²´ ì €ì¥
                        // currentPlayerSelectedCards : ë°°ì—´, í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ ì¹´ë“œë¥¼ ì €ì¥, ìµœëŒ€ í¬ê¸° 2
                        // firstPlayer : ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ ê°ì²´
                        // secondPlayer : ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ ê°ì²´ 
                        // currentPlayer : í˜„ì¬ í”Œë ˆì´ì–´ ê°ì²´, í˜„ì¬ ê²Œì„ì„ ì§„í–‰í•˜ëŠ” ê°ì²´
                        // gameResult : GameResult ê°ì²´

                    // im -> updateGame(), createAllCardElement(), createAllPlayerElement(), createCards(), shuffleCardImageNumbers(), setFirstPlayerOnCurrentPlayer(), setSecondPlayerOnCurrentPlayer(), currentPlayerSelectCard(), findCurrentPlayerSelectedCard(), compareCurrentPlayerSelectedCards(), showCurrentPlayerSelectedCards(), deciedGameResult()
                        // updateGame() : ê²Œì„ íŒì„ ì—…ë°ì´íŠ¸í•¨
                        // createAllCardElement() : ë””ìŠ¤í”Œë ˆì´ì— ë“¤ì–´ê°ˆ ëª¨ë“  ì¹´ë“œ íƒœê·¸ë¥¼ ìƒì„±í•´ì„œ ì¶”ê°€
                        // createAllPlayerElement() : ë””ìŠ¤í”Œë ˆì´ì— ë“¤ì–´ê°ˆ ëª¨ë“  í”Œë ˆì´ì–´ íƒœê·¸ë¥¼ ìƒì„±í•´ì„œ ì¶”ê°€
                        // createCards() : ëª¨ë“  ì¹´ë“œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ë°°ì—´ì— ì €ì¥í•¨
                        // shuffleCardImageNumbers() : ì¹´ë“œ ì´ë¯¸ì§€ ë²ˆí˜¸ë¥¼ ì„ìŒ
                        // setFirstPlayerOnCurrentPlayer() : ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ë¥¼ í˜„ì¬ í”Œë ˆì´ì–´ë¡œ ì„¤ì •
                        // setSecondPlayerOnCurrentPlayer() : ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ë¥¼ í˜„ì¬ í”Œë ˆì´ì–´ë¡œ ì„¤ì •
                        // currentPlayerSelectCard() : í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì¹´ë“œë¥¼ ì„ íƒí–ˆì„ ë•Œ ì‘ì—… ì²˜ë¦¬
                        // findCurrentPlayerSelectedCard() : í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ ì¹´ë“œë¥¼ 
                        // compareCurrentPlayerSelectedCards() : í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ 2 ì¹´ë“œê°€ ì„œë¡œ ì¼ì¹˜í•˜ëŠ”ì§€(ì¹´ë“œ ìˆ«ì, ì¹´ë“œ ìƒ‰ê¹”)
                        // showCurrentPlayerSelectedCards() : í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ ì¹´ë“œë“¤ì„ ë³´ì—¬ì¤Œ
                        // decidGameResult() : ê²Œì„ ê²°ê³¼ë¥¼ íŒë‹¨í•¨ 

        // 1. ì¹´ë“œ ê°ì²´ : ê° ì¹´ë“œì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” ê°ì²´ 
        function Card(cardImageNumber = 0, state = "back") {
            this.cardImageNumber = cardImageNumber; // ì¹´ë“œì˜ ì´ë¯¸ì§€ ìˆ«ìê°’
            this.state = state; // ì¹´ë“œì˜ ìƒíƒœê°’(ì•ë©´, ë’·ë©´)

            // ì¹´ë“œê°€ ì•ë©´ì¸ì§€ ì‘ë‹µ
            this.isFront = function() {
                return this.state === "front" ? true : false;
            }

            // ì¹´ë“œì˜ ìˆ«ì ê³„ì‚° 
            this.getNumber = function() {
                return this.cardImageNumber % 13; 
            }

            // ì¹´ë“œì˜ ëª¨ì–‘ ê³„ì‚° 
            this.getShape = function() {
                return this.shapes[Math.floor(this.cardImageNumber/13)]; 
            }

            // ì¹´ë“œì˜ ìƒ‰ê¹” ê³„ì‚° 
            this.getColor = function() {
                return Math.floor(this.cardImageNumber/13)%2 === 0 ? "red" : "black";
            }

            // ì¹´ë“œì˜ ì´ë¯¸ì§€ ìˆ«ì ì¡°íšŒ 
            this.getCardImageNumber = function() {
                return this.cardImageNumber;
            }

            // í•´ë‹¹ ì¹´ë“œì™€ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ë‹¤ë¥¸ ì¹´ë“œì˜ ìˆ«ìê°’ê³¼ ì»¬ëŸ¬ê°’ì„ ë¹„êµí•˜ì—¬ ê²°ê³¼ ê³„ì‚° 
            this.isSameNumberAndColor = function(otherNumber, otherColor) {
                let sameCount = 0;
                sameCount += (this.isSameNumber(otherNumber) ? 1 : 0);
                sameCount += (this.isSameColor(otherColor) ? 1 : 0);

                return sameCount;
            }

            // ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ë‹¤ë¥¸ ì¹´ë“œì˜ ìˆ«ìì™€ ì¼ì¹˜í•˜ëŠ”ì§€ íŒë‹¨ 
            this.isSameNumber = function(otherNumber) {
                return this.getNumber() === otherNumber ? true : false;
            }

            // ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ë‹¤ë¥¸ ì¹´ë“œì˜ ìƒ‰ê¹”ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ íŒë‹¨ 
            this.isSameColor = function(otherColor) {
                return this.getColor() === otherColor ? true : false;
            }

            // ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ìê°’ê³¼ ë§ëŠ”ì§€ íŒë‹¨ 
            this.isSameCardImageNumber = function(otherCardImageNumber) {
                return this.cardImageNumber === otherCardImageNumber ? true : false;
            }

            // ì¹´ë“œ ë’¤ì§‘ê¸° 
            this.flip = function() {
                this.state = (this.state === "front" ? "back" : "front");
            }
            
            // ì¹´ë“œ ìƒíƒœ ì¡°íšŒ 
            this.getState = function() {
                return this.state;
            }

        }

        // 2. í”Œë ˆì´ì–´ ê°ì²´ : ê° í”Œë ˆì´ì–´ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” ê°ì²´ 
        function Player(name = "anonymous", score = 0, leftCount = 15) {
            this.name = name; // í”Œë ˆì´ì–´ëª…
            this.score = score; // í”Œë ˆì´ì–´ì ìˆ˜
            this.leftCount = leftCount; // í”Œë ˆì´ì–´ì˜ ë‚¨ì€ ê²Œì„ íšŸìˆ˜

            // í”Œë ˆì´ì–´ê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ë‹¤ë¥¸ í”Œë ˆì´ì–´ ê°’ê³¼ ìì‹ ì˜ ê°’ì„ ë¹„êµí•´ì„œ, ìŠ¹ì íŒë‹¨ 
            this.isWinner = function(otherPlayerScore) {
                return this.score > otherPlayerScore ?  -1 : (this.score === otherPlayerScore ? 0: 1);
            }

            // ì´ë¦„ ì¡°íšŒ 
            this.getName = function() {
                return this.name;
            }

            // í”Œë ˆì´ì–´ì˜ ê²Œì„ íšŸìˆ˜ê°€ ë‚¨ì•„ìˆëŠ”ì§€ íŒë‹¨ 
            this.isLeftCount =  function() {
                return this.leftCount > 0 ? true : false;
            }

            // ìì‹ ì˜ ì ìˆ˜ì— ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ì–‘ë§Œí¼ ë”í•¨
            this.addScore = function(amount) {
                this.score += amount;
            }

            // ìì‹ ì˜ ì ìˆ˜ ë°˜í™˜ 
            this.getScore = function() {
                return this.score;
            }

            // ìì‹ ì˜ ê²Œì„ íšŸìˆ˜ 1 ê°ì†Œ 
            this.decreaseCount = function() {
                if (this.leftCount > 0) {
                    this.leftCount--;
                }
            }
        }

        // 3. ê²Œì„ ë§¤ë‹ˆì € ê°ì²´ : ê²Œì„ ì§„í–‰ì„ ë‹´ë‹¹í•´ì£¼ëŠ” ê°ì²´ 
        function GameManager() {
            this.cardImageNumbers = [   
                                0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 
                                10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
                                20, 21, 22, 23, 24, 25, 26, 27, 28, 29,
                                30, 31, 32, 33, 34, 35, 36, 37, 38, 39,
                                40, 41, 42, 43, 44, 45, 46, 47, 48, 49,
                                            50, 51
                            ]; // ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ìë¥¼ ë°°ì—´ì— ì €ì¥ 
            this.cardShapes = ["diamond", "clova", "heart", "spade"]; // ì¹´ë“œì˜ ëª¨ì–‘ì„ ë¬¸ìì—´ë¡œ ì €ì¥ 
            this.cards = []; // ìƒì„±ëœ ì¹´ë“œ ê°ì²´ë¥¼ ì €ì¥  
            this.currentPlayerSelectedCards = []; // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ ì¹´ë“œë¥¼ ì €ì¥ 
            this.firstPlayer = new Player("ë°˜í•­í•˜ê³  ì‹¶ì–´ğŸ‘¨ğŸ»â€ğŸ¤", 0 , 5); // ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ ì €ì¥ 
            this.secondPlayer = new Player("ë¨¹ëŠ”ê²Œ ìµœê³ ì§€ğŸ‘©ğŸ»â€ğŸ³", 0, 5); // ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ ì €ì¥ 
            this.currentPlayer = null; // í˜„ì¬ í”Œë ˆì´ì–´ ì €ì¥ 


            this.gameResultMessage = new Map(); // ê²Œì„ ê²°ê³¼ ë§µì— ì €ì¥ 
            this.gameResultMessage.set(-1, `"${this.firstPlayer.getName()}"ì´ ì´ê²¼ìŠµë‹ˆë‹¤.ğŸ”Š`); 
            this.gameResultMessage.set(0, `"${this.firstPlayer.getName()}"ì™€ "${this.secondPlayer.getName()}"ì˜ ì ìˆ˜ê°€ ê°™ìŠµë‹ˆë‹¤. ë¬´ìŠ¹ë¶€ì…ë‹ˆë‹¤.ğŸ”Š`);
            this.gameResultMessage.set(1, `${this.secondPlayer.getName()}ê°€ ì´ê²¼ìŠµë‹ˆë‹¤.ğŸ”Š`);

            // ê²Œì„ íŒ ì—…ë°ì´íŠ¸ 
            this.updateGame = function() {
                this.shuffleCardImageNumber(); // ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì ì„ê¸°
                this.createCards(); // ì¹´ë“œ ê°ì²´ ìƒì„±í•´ì„œ ë°°ì—´ì— ë‹´ê¸°
                this.createAllCardElement(); // ì¹´ë“œ íƒœê·¸ ìƒì„±í•´ì„œ html ë¬¸ì„œì— ì¶”ê°€
                this.createAllPlayerElement(); // í”Œë ˆì´ì–´ íƒœê·¸ ìƒì„±í•´ì„œ html ë¬¸ì„œì— ì¶”ê°€ 
            }

            // ê²Œì„ íŒ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸, í”Œë ˆì´ì–´ ì •ë³´ë§Œ ì‹¤ì‹œê°„ ë³€ê²½
            this.updateEachPlayerState = function() {
                const firstPlayerArea = document.getElementById("firstPlayerArea");
                const secondPlayerArea = document.getElementById("secondPlayerArea");
                firstPlayerArea.innerHTML = `<h3 class="title">${this.firstPlayer.getName()}</h3><p class="title"> ğŸ¯ ë‚¨ì€ íšŸìˆ˜ ${this.firstPlayer.leftCount} ì ìˆ˜ëŠ” ${this.firstPlayer.getScore()}</p>`;
                secondPlayerArea.innerHTML = `<h3 class="title">${this.secondPlayer.getName()}</h3><p class="title"> ğŸ¯ ë‚¨ì€ íšŸìˆ˜ ${this.secondPlayer.leftCount} ì ìˆ˜ëŠ” ${this.secondPlayer.getScore()}</p>`;
            }

            // ì¹´ë“œ íƒœê·¸ ìƒì„±í•´ì„œ html ë¬¸ì„œì— ì¶”ê°€
            this.createAllCardElement = function() {
                const cardArea = document.getElementById("cardArea");
            
                cardArea.innerHTML = "";
                for (card of this.cards) {
                    const e = document.createElement("img");
                    if (card.getState() === "front") {
                        e.setAttribute("src", `img/card_img/${card.getCardImageNumber()}.png`);
                    } else {
                        e.setAttribute("src", `img/card_img/back.png`);
                    }
                    e.setAttribute("data-number", card.getCardImageNumber());
                    e.setAttribute("onclick", "selectCardTag(this)");
                    cardArea.appendChild(e);
                }
            }

            // í”Œë ˆì´ì–´ íƒœê·¸ ìƒì„±í•´ì„œ html ë¬¸ì„œì— ì¶”ê°€ 
            this.createAllPlayerElement = function() {
                const firstPlayerArea = document.getElementById("firstPlayerArea");
                const secondPlayerArea = document.getElementById("secondPlayerArea");
                firstPlayerArea.innerHTML = `<h3 class="title">${this.firstPlayer.getName()}</h3><p class="title"> ğŸ¯ ë‚¨ì€ íšŸìˆ˜ ${this.firstPlayer.leftCount} ì ìˆ˜ëŠ” ${this.firstPlayer.getScore()}</p>`;
                secondPlayerArea.innerHTML = `<h3 class="title">${this.secondPlayer.getName()}</h3><p class="title"> ğŸ¯ ë‚¨ì€ íšŸìˆ˜ ${this.secondPlayer.leftCount} ì ìˆ˜ëŠ” ${this.secondPlayer.getScore()}</p>`;
            }

            // ì¹´ë“œ ê°ì²´ ìƒì„±í•´ì„œ ë°°ì—´ì— ë‹´ê¸°
            this.createCards = function() {
                this.cards.splice("");
                for (cardImageNumber of this.cardImageNumbers) {
                    this.cards.push(new Card(cardImageNumber));
                }
            }

            // ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì ì„ê¸°
            this.shuffleCardImageNumber = function() {
                for (let i=0; i<100; i++) {
                    this.cardImageNumbers.sort(() => Math.random() - 0.5);
                }
            }
            
            // ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ë¥¼ í˜„ì¬ í”Œë ˆì´ì–´ë¡œ ì„¤ì • 
            this.setFirstPlayerOnCurrentPlayer = function() {
                this.currentPlayer = this.firstPlayer;
            }

            // ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ë¥¼ í˜„ì¬ í”Œë ˆì´ì–´ë¡œ ì„¤ì • 
            this.setSecondPlayerOnCurrentPlayer = function() {
                this.currentPlayer = this.secondPlayer;
            }

            // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì¹´ë“œë¥¼ ì„ íƒí–ˆì„ ë•Œ ì²˜ë¦¬ ê³¼ì • 
            this.currentPlayerSelectCard = function(selectedCardTag) {
                // í˜„ì¬ í”Œë ˆì´ì–´ ê°ì²´ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° 
                if (!(this.currentPlayer instanceof Player)) {
                    alert("í”Œë ˆì´ì–´ ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ê²Œì„ì„ ì§„í–‰í•˜ì„¸ìš”.ğŸ”Š");
                    return;
                }

                // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ëª¨ë“  íšŸìˆ˜ë¥¼ ë‹¤ ì†Œì§„í•œ ê²½ìš°
                if (!this.currentPlayer.isLeftCount()) {
                    alert(`"${this.currentPlayer.getName()}"ì˜ ê²Œì„ íšŸìˆ˜ê°€ ${this.currentPlayer.leftCount}ì…ë‹ˆë‹¤.ğŸ”Š`);
                    alert(`"${this.currentPlayer.getName()}"ì˜ ì ìˆ˜ëŠ” ${this.currentPlayer.getScore()}ì…ë‹ˆë‹¤.ğŸ”Š`);
                    this.updateEachPlayerState();
                    return;
                }

                // ë‘ê°œë¥¼ ì´ë¯¸ ì„ íƒí–ˆìœ¼ë©´ íŒë‹¨í•˜ê¸°
                if (this.currentPlayerSelectedCards.length === 2) {
                    const amount = this.compareCurrentPlayerSelectedCards();
                    this.currentPlayer.addScore(amount);
                    this.currentPlayer.decreaseCount();
                    this.updateEachPlayerState();
                    return;
                }

                const currentPlayerSelectedCard = this.findCurrentPlayerSelectedCard(selectedCardTag);
                this.currentPlayerSelectedCards.push(currentPlayerSelectedCard);
                this.showCurrentPlayerSelectedCard(selectedCardTag);
            }

            // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ íƒœê·¸ì— ë§¤ì¹­ë˜ëŠ” ì¹´ë“œ ê°ì²´ ì°¾ê¸° 
            this.findCurrentPlayerSelectedCard = function(selectedCardTag) {
                const selectedCardImageNumber = parseInt(selectedCardTag.getAttribute("data-number"));
                
                let currentPlayerSelectedCard = null;
                for (card of this.cards) {
                    if (card.isSameCardImageNumber(selectedCardImageNumber)) {
                        currentPlayerSelectedCard = card;
                        break;
                    }
                }

                return currentPlayerSelectedCard;
            }

            // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ ì¹´ë“œë“¤ì„ ë¹„êµí•¨ 
            this.compareCurrentPlayerSelectedCards = function() {
                const firstSelectedCard = this.currentPlayerSelectedCards.shift();
                const secondSelectedCard = this.currentPlayerSelectedCards.shift();
                const amount = firstSelectedCard.isSameNumberAndColor(secondSelectedCard.getNumber(), secondSelectedCard.getColor());
                
                // ìˆ«ìì™€ ì»¬ëŸ¬ê°€ ë‹¤ í‹€ë¦° ê²½ìš°
                if (amount === 0) {
                    // í•´ë‹¹ ì¹´ë“œ ê°ì²´ì— í•´ë‹¹í•˜ëŠ” íƒœê·¸ì˜ ì†ì„± ì—…ë°ì´íŠ¸(ë’·ë©´ìœ¼ë¡œ ì„¤ì •)
                    const cardAreaChildren = document.getElementById("cardArea").children;
                    for (child of cardAreaChildren) {
                        if (firstSelectedCard.isSameCardImageNumber(parseInt(child.getAttribute("data-number"))) || secondSelectedCard.isSameCardImageNumber(parseInt(child.getAttribute("data-number")))) {
                            child.setAttribute("src", `img/card_img/back.png`);
                        } 
                    }
                }
                return amount;
            }

            // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ ì¹´ë“œë¥¼ ë³´ì—¬ì¤Œ 
            this.showCurrentPlayerSelectedCard = function(selectedCardTag) {
                // í˜„ì¬ í”Œë ˆì´ì–´ì˜ ê²Œì„ íšŸìˆ˜ê°€ 0ì¸ ê²½ìš° 
                if (!this.currentPlayer.isLeftCount()) return;

                // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ íƒœê·¸ì— í•´ë‹¹í•˜ëŠ” ì¹´ë“œ ê°ì²´ ì°¾ê¸° 
                const currentPlayerSelectedCard = this.findCurrentPlayerSelectedCard(selectedCardTag);
                // ì¹´ë“œ ê°ì²´ê°€ ì•ë©´ì´ë©´ ìŠ¤í‚µ 
                if (currentPlayerSelectedCard.isFront()) return;

                // ì¹´ë“œ ê°ì²´ê°€ ë’·ë©´ì´ì˜€ìœ¼ë©´, ëŒë¦¬ê¸° 
                currentPlayerSelectedCard.flip();
                // ì¹´ë“œ íƒœê·¸ì˜ ì†ì„± ì—…ë°ì´íŠ¸ 
                selectedCardTag.setAttribute("src", `img/card_img/${currentPlayerSelectedCard.getCardImageNumber()}.png`);
            }

            // ê²Œì„ ê²°ê³¼ íŒë‹¨ 
            this.decideGameResult = function() {
                // í”Œë ˆì´ì–´ì˜ ê²Œì„ íšŸìˆ˜ê°€ ë‚¨ì•„ìˆëŠ” ê²½ìš°, ìŠ¤í‚µ 
                if (this.firstPlayer.isLeftCount() || this.secondPlayer.isLeftCount()) {
                    alert(`ì•„ì§ í”Œë ˆì´ì–´ì˜ íŒìˆ˜ê°€ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤. ëª¨ë“  í”Œë ˆì´ì–´ì˜ íŒìˆ˜ ë‹¤ ëë‚˜ë©´ ìš”ì²­í•´ì£¼ì„¸ìš”.ğŸ”Š`);
                    return false;
                }

                // ê²Œì„ ê²°ê³¼ë¥¼ ìˆ«ìë¡œ ë°˜í™˜ 
                const result = this.firstPlayer.isWinner(this.secondPlayer.getScore());
                // ìˆ«ì ê²°ê³¼ë¥¼ ë¬¸ì ê²°ê³¼ë¡œ ë°˜í™˜í•´ì„œ ì¶œë ¥ 
                this.getResultMessage(result);
                return true;
            }

            this.getResultMessage = function(result) {
                const resultMessage = this.gameResultMessage.get(result);
                alert(resultMessage);
            }
        }

        const gameManager = new GameManager(); // ê²Œì„ í”Œë ˆì´ì–´ë¥¼ ì „ì—­ ë³€ìˆ˜ë¡œ ìƒì„± 
        window.onload = function() {
            gameManager.updateGame();
        }

        // ì‚¬ìš©ìê°€ ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ì˜ ê²Œì„ ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥¸ ê²½ìš° 
        function selectFirstPlayer() {
            // í˜„ì¬ í”Œë ˆì´ì–´ë¥¼ ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ë¡œ ì„¤ì •
            gameManager.setFirstPlayerOnCurrentPlayer(); 
            // ê²Œì„íŒ ì—…ë°ì´íŠ¸ 
            gameManager.updateGame();
            // ê²Œì„ ì‹œì‘ ì•Œë¦¼ ë©”ì‹œì§€ ì¶œë ¥ 
            alert(`${gameManager.currentPlayer.getName()}ì˜ ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.ğŸ”Š`);
        }

        // ì‚¬ìš©ìê°€ ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ì˜ ê²Œì„ ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥¸ ê²½ìš° 
        function selectSecondPlayer() {
            // í˜„ì¬ í”Œë ˆì´ì–´ë¥¼ ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ë¡œ ì„¤ì • 
            gameManager.setSecondPlayerOnCurrentPlayer();
            // ê²Œì„íŒ ì—…ë°ì´íŠ¸ 
            gameManager.updateGame();
            // ê²Œì„ ì‹œì‘ ì•Œë¦¼ ë©”ì‹œì§€ ì¶œë ¥ 
            alert(`${gameManager.currentPlayer.getName()}ì˜ ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.ğŸ”Š`);
        }

        // ì‚¬ìš©ìê°€ íŠ¹ì • íƒœê·¸ë¥¼ ì„ íƒí•˜ë©´, ê²Œì„ ë§¤ë‹ˆì €ê°€ ì²˜ë¦¬ 
        function selectCardTag(selectCardTag) {
            gameManager.currentPlayerSelectCard(selectCardTag);
        }

        // ì‚¬ìš©ìê°€ ê²°ê³¼ ì¶œë ¥ ë²„íŠ¼ì„ ëˆ„ë¥¸ê²½ìš°, ê²Œì„ ë§¤ë‹ˆì €ê°€ ê²Œì„ ê²°ê³¼ íŒë‹¨ 
        function getGameResult() {
            const answer = gameManager.decideGameResult();
            if (answer) {
                gameManager.firstPlayer = new Player();
                gameManager.secondPlayer = new Player();
                gameManager.updateGame();
            }
        }
    </script>
</body>
</html>
