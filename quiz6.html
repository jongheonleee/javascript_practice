<!--ì¹´ë“œ ê²Œì„-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            background-image: url("img/poker.png");
        }
        img {
            margin-top: 5px;
            margin-bottom: 5px;
            margin-left: 2px;
            margin-right: 2px;
            width: 100px;
            height: 100px;
        }
        #container {
            display: grid;
            grid-template-columns: 1fr 3fr 1fr;
        }
        #gameArea {
            text-align: center;
            display: inline;
            margin-top: 0;
            margin-bottom: 0;
            margin-left: 10em;
            margin-right: 10em;
        }
        #btnArea {
            text-align: center
        }
        button {
            display: inline-block;
            margin: 0;
            padding: 0;
            position: relative;
            border: none;
            min-width: 200px;
            min-height: 50px;
            background: linear-gradient(
                90deg,
                rgba(129, 230, 217, 1) 0%,
                rgba(79, 209, 197, 1) 100%
            );
            border-radius: 1000px;
            color: darkslategray;
            cursor: pointer;
            box-shadow: 12px 12px 24px rgba(79, 209, 197, 0.64);
            font-weight: 700;
            transition: 0.3s;
        }
        #firstPlayerArea {
            text-align: center;
            display: inline;
        }
        #secondPlayerArea {
            text-align: center;
            display: inline;
        }
        #playerRecordArea {
            display: inline;
        }
        #playerArea {
            display: inline;
        }
        .title {
            color: white;
            font-style: italic;
            font-size : 25px;
            display: inline;
        }
        #leftPlayerArea {
            float : left;
        }
        #rightPlayerArea {
            float : right;
        }
        
    </style>
</head>
<body>
    <h1 style="text-align: center; color : white">ì •ì„ ì½”ë”© í€´ì¦ˆ 4 - Poker Game ğŸ°</h1>
    <br>
    <span id="leftPlayerArea">
        <div id="firstPlayerArea">
            <h2 class="title"></h2>
            <br>
        </div>
    </span>
    <span id="rightPlayerArea">
        <div id="secondPlayerArea">
            <h2 class="title"></h2>
            <br>
        </div>
    </span>
    
    

    <div id="gameArea">
        <div id="cardArea"></div>
    </div>


    <div id="btnArea">
        <button onclick="selectFirstPlayer()">
            í”Œë ˆì´ì–´1 ì‹œì‘
        </button>
    
        <button onclick="getGameResult()">
            ê²Œì„ ê²°ê³¼ ì¶œë ¥ 
        </button>
    
        <button onclick="selectSecondPlayer()">
            í”Œë ˆì´ì–´2 ì‹œì‘
        </button>
    </div>

    <script>
        // 3ì°¨ ê°ì²´ ì„¤ê³„ë„ 
            // ê°ì²´ ì„¤ê³„ 
                // 1. ì¹´ë“œ ê°ì²´ âœ…
                    // iv -> cardImageNumber, state 
                        // cardImageNumber : ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì, ìˆ«ìí˜• 
                        // state : ìƒíƒœ, ì•ë©´ì¸ì§€ ë’·ë©´ì¸ì§€, boolean 

                    // im -> getNumber(), getShape(), getColor(), getCardImageNumber(), isFront(), isSameNumber(), isSameColor(), isSameShape(), isSameCardImageNumber(), flip()
                        // getNumber() : ì¹´ë“œ ìˆ«ì ì¶”ì¶œ
                        // getShape() : ì¹´ë“œ ëª¨ì–‘ ì¶”ì¶œ
                        // getColor() : ì¹´ë“œ ìƒ‰ê¹” ì¶”ì¶œ 
                        // getCardImageNumber() : ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì ë°˜í™˜ 
                        // isFront() : ì¹´ë“œê°€ ì•ë©´ì¸ì§€ ì‘ë‹µ
                        // isSameNumber() : ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ì¹´ë“œì˜ ìˆ«ìì™€ ê°™ì€ì§€ ì‘ë‹µ 
                        // isSameColor() : ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ì¹´ë“œì˜ ìƒ‰ê¹”ê³¼ ê°™ì€ì§€ ì‘ë‹µ 
                        // isSameShape() : ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ì¹´ë“œì˜ ëª¨ì–‘ê³¼ ê°™ì€ì§€ ì‘ë‹µ 
                        // calculateSmaeCount() : ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ê°’ë“¤ê³¼ ì–¼ë§ˆë‚˜ ë§ì•˜ëŠ”ì§€ ê³„ì‚°í•´ì„œ ì‘ë‹µ 
                        // isSameCardImageNumber() : ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ì¹´ë“œì˜ ì´ë¯¸ì§€ ìˆ«ìì™€ ê°™ì€ì§€ ì‘ë‹µ  
                        // flip() : ì¹´ë“œ ìƒíƒœ ë°˜ì „ 
                    

                

                // 2. í”Œë ˆì´ì–´ ê°ì²´ âœ…
                    // iv -> name, score, leftCount
                        // name : ì´ë¦„, ë¬¸ìì—´
                        // score : ì ìˆ˜, ìˆ«ìí˜• 
                        // leftCount : ë‚¨ì€ íŒìˆ˜, ìˆ«ìí˜•  

                    // im -> getName(), getScore(), getLeftCount(), isWinner(), isLeftCount(), addScore(), decreaseCount()
                        // getName() : ì´ë¦„ ë°˜í™˜
                        // getScore() : ì ìˆ˜ ë°˜í™˜
                        // getLeftCount() : ë‚¨ì€ íšŸìˆ˜ ë°˜í™˜
                        // isWinner() : ìì‹ ì´ ìŠ¹ìì¸ì§€, íŒ¨ìì¸ì§€, ë¬´ìŠ¹ë¶€ì¸ì§€ ì‘ë‹µ
                        // isLeftCount() : ë‚¨ì€ íšŸìˆ˜ê°€ ìˆëŠ”ì§€ ì‘ë‹µ
                        // addScore() : ìì‹ ì˜ ì ìˆ˜ì— ì¼ì •ëŸ‰ ë”í•¨
                        // decreaseCount() : ë‚¨ì€ íšŸìˆ˜ë¥¼ 1 ê°ì†Œí•¨
            
                // 3. ê²Œì„ ë§¤ë‹ˆì € ê°ì²´ âœ…
                    // iv -> cardImageNumbers, FIRST_CARD_IMAGE_NUMBER, LAST_CARD_IMAGE_NUMBER, cards, currentPlayerSelectedTwoCard, firstPlayer, secondPlayer, currentPlayer, gameResultMessage
                        // cardImageNumbers : ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ìë¥¼ ì €ì¥í•˜ëŠ” ë°°ì—´
                        // FIRST_CARD_IMAGE_NUMBER, LAST_CARD_IMAGE_NUMBER : ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ìì˜ ì‹œì‘ê³¼ ë ìˆ«ì
                        // cards : ì¹´ë“œ ê°ì²´ ì €ì¥í•˜ëŠ” ë°°ì—´
                        // currentPlayerSelectedTwoCard : í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ 2ê°œì˜ ì¹´ë“œë¥¼ ì €ì¥í•˜ëŠ” ë°°ì—´
                        // firstPlayer, secondPlayer, currentPlayer : ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ ê°ì²´, ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ ê°ì²´, í˜„ì¬ ê²Œì„ì„ ì§„í–‰í•˜ëŠ” í”Œë ˆì´ì–´ ê°ì²´
                        // gameResultMessage : ê²Œì„ ê²°ê³¼ ìˆ«ìì™€ ê²Œì„ ê²°ê³¼ ë©”ì‹œì§€ë¥¼ ë§¤ì¹­ì‹œì¼œì„œ ì €ì¥í•œ ë§µ

                    // im -> appendAllCardTag(), appendAllPlayerTag(), getCurrentPlayer(), getGameResult(), getSameAmountBetweenTwoSelectedCard(), 
                           // createAllCard(), createAllPlayer(), createGameResultMessage(), updateGame(), updateAllPlayerTag(), occurPlayerSelectCard(),
                           // startGame(), suffleAllCard(), suffleAllCardImageNumber(), setFirstPlayerOnCurrentPlayer(), setSecondPlayerOnCurrentPlayer(), showSelectedCard(),
                           // hideAllFrontCard(), findSelectedCardByTag(), notifyGameResult(), resetAllPlayer()
                        
                            // appendAllCardTag() : ëª¨ë“  ì¹´ë“œ ê°ì²´ì˜ íƒœê·¸ë¥¼ ìƒì„±í•´ì„œ ì¶”ê°€
                            // appendAllPlayerTag() : ëª¨ë“  í”Œë ˆì´ì–´ ê°ì²´ì˜ íƒœê·¸ë¥¼ ìƒì„±í•´ì„œ ì¶”ê°€

                            // getCurrentPlayer() : í˜„ì¬ í”Œë ˆì´ì–´ë¥¼ ë°˜í™˜
                            // getGameResult() : í˜„ì¬ ê²Œì„ ê²°ê³¼ ìˆ«ìë¥¼ ë°˜í™˜
                            // getSameAmountBetweenTwoSelectedCard() : í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ 2ê°œì˜ ì¹´ë“œ ì¤‘ì—ì„œ ë¬´ì—‡ì´ ë§ëŠ”ì§€ ë°˜í™˜(ìˆ«ì, ìƒ‰ê¹”, ë„í˜•)

                            // createAllCard() : ëª¨ë“  ì¹´ë“œ ê°ì²´ë¥¼ ìƒì„±
                            // createAllPlayer() : ëª¨ë“  í”Œë ˆì´ì–´ ê°ì²´ë¥¼ ìƒì„±
                            // createGameResultMessage() : ëª¨ë“  ê²Œì„ ê²°ê³¼ ë©”ì‹œì§€ë¥¼ ìƒì„±í•´ì„œ ë§µì— ê²Œì„ ê²°ê³¼ ìˆ«ìì™€ ë§¤í•‘í•˜ì—¬ ì €ì¥

                            // updateGame() : ê²Œì„íŒ ì—…ë°ì´íŠ¸
                            // updateAllPlayerTag() : ëª¨ë“  í”Œë ˆì´ì–´ì˜ íƒœê·¸ ì—…ë°ì´íŠ¸

                            // occurPlayerSelectCard() : í”Œë ˆì´ì–´ê°€ ì¹´ë“œë¥¼ ì„ íƒí–ˆì„ ë•Œ ì²˜ë¦¬í•´ì¤˜ì•¼ í•  ì‘ì—…

                            // startGame() : ê²Œì„ì´ ì‹œì‘ëì„ ë•Œ ì´ˆê¸° í™”ë©´, ìƒíƒœ êµ¬ì„±
                            // suffleAllCard() : ëª¨ë“  ì¹´ë“œ ê°ì²´ë¥¼ ì„ìŒ
                            // suffleAllCardImageNumber() : ëª¨ë“  ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ìë¥¼ ì„ìŒ
                            // setFirstPlayerOnCurrentPlayer(), setSecondPlayerOnCurrentPlayer() : í˜„ì¬ í”Œë ˆì´ì–´ ì„¸íŒ…
                            // showSelectedCard() : ì„ íƒí•œ ì¹´ë“œë¥¼ í™”ë©´ì— ë³´ì—¬ì¤Œ

                            // hideAllFrontCard() : ì•ë©´ì¸ ì¹´ë“œë¥¼ ëª¨ë‘ ë’·ë©´ìœ¼ë¡œ ëŒë ¤ì¤Œ

                            // findSelectedCardByTag() : ì„ íƒœí•œ íƒœê·¸ì™€ ë§¤ì¹­ë˜ëŠ” ì¹´ë“œ ê°ì²´ ì°¾ê¸°

                            // notifyGameResult() : ê²Œì„ ê²°ê³¼ ë°œí‘œ

                            // resetAllPlayer() : ëª¨ë“  í”Œë ˆì´ì–´ ì´ˆê¸°í™” 
        

        const gameManager = new GameManager(); // ê²Œì„ í”Œë ˆì´ì–´ë¥¼ ì „ì—­ ë³€ìˆ˜ë¡œ ìƒì„± 
        window.onload = function() {
            alert('ì–´ì„œì™€ ì—¬ëŠ˜ì´ì˜ "Poker Game ğŸ°"ì€ ì²˜ìŒì´ì§€?!ğŸ’¥')
            gameManager.startGame();
        }
        
        // ì‚¬ìš©ìê°€ ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ì˜ ê²Œì„ ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥¸ ê²½ìš° 
        function selectFirstPlayer() {
            gameManager.setFirstPlayerOnCurrentPlayer(); // í˜„ì¬ í”Œë ˆì´ì–´ë¥¼ ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ë¡œ ì„¤ì •
            gameManager.updateGame(); // ê²Œì„íŒ ì—…ë°ì´íŠ¸ 
            alert(`${gameManager.getCurrentPlayerName()}ì˜ ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.ğŸ”Š`); // ê²Œì„ ì‹œì‘ ì•Œë¦¼ ë©”ì‹œì§€ ì¶œë ¥ 
        }
        
        // ì‚¬ìš©ìê°€ ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ì˜ ê²Œì„ ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥¸ ê²½ìš° 
        function selectSecondPlayer() {
            gameManager.setSecondPlayerOnCurrentPlayer(); // í˜„ì¬ í”Œë ˆì´ì–´ë¥¼ ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ë¡œ ì„¤ì • 
            gameManager.updateGame(); // ê²Œì„íŒ ì—…ë°ì´íŠ¸ 
            alert(`${gameManager.getCurrentPlayerName()}ì˜ ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.ğŸ”Š`); // ê²Œì„ ì‹œì‘ ì•Œë¦¼ ë©”ì‹œì§€ ì¶œë ¥ 
        }
        
        // ì‚¬ìš©ìê°€ íŠ¹ì • íƒœê·¸ë¥¼ ì„ íƒí•˜ë©´, ê²Œì„ ë§¤ë‹ˆì €ê°€ ì²˜ë¦¬ 
        function selectCardTag(selectCardTag) {
            gameManager.occurPlayerSelectCard(selectCardTag);
        }
        
        // ì‚¬ìš©ìê°€ ê²°ê³¼ ì¶œë ¥ ë²„íŠ¼ì„ ëˆ„ë¥¸ê²½ìš°, ê²Œì„ ë§¤ë‹ˆì €ê°€ ê²Œì„ ê²°ê³¼ íŒë‹¨ 
        function getGameResult() {
            const answer = gameManager.getGameResult();
            if (answer) {
                gameManager.resetAllPlayer();
                gameManager.startGame(); 
            }
        }

        // 1. ì¹´ë“œ ê°ì²´ : ì¹´ë“œì˜ ìƒíƒœ(ì•ë©´, ë’·ë©´)ê³¼ ì¹´ë“œ ìˆ«ì ì´ë¯¸ì§€ë¥¼ ì €ì¥, ê·¸ë¦¬ê³  ê·¸ì™€ ê´€ë ¨ëœ ì‘ì—… ë¬¶ìŒ 
        function Card(cardImageNumber = 0, state = false) {
            var cardImageNumber = cardImageNumber; // ì¹´ë“œì˜ ì´ë¯¸ì§€ ìˆ«ì 
            var state = state; // ì¹´ë“œì˜ ìƒíƒœê°’(ì•ë©´, ë’·ë©´)

            // ì¹´ë“œê°€ ì•ë©´ì¸ì§€ ì‘ë‹µ
            this.isFront = function() {
                return state;
            }

            // ì¹´ë“œì˜ ìˆ«ì ì¶”ì¶œ 
            this.getNumber = function() {
                return cardImageNumber % 13; 
            }

            // ì¹´ë“œì˜ ëª¨ì–‘ ì¶”ì¶œ 
            this.getShape = function() {
                return Math.floor(cardImageNumber/13); 
            }

            // ì¹´ë“œì˜ ìƒ‰ê¹” ì¶”ì¶œ  
            this.getColor = function() {
                return Math.floor(cardImageNumber/13)%2 === 0 ? "red" : "black";
            }

            // ì¹´ë“œì˜ ì´ë¯¸ì§€ ìˆ«ì ë°˜í™˜ 
            this.getCardImageNumber = function() {
                return cardImageNumber;
            }

            // ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ê°’ê³¼ ì–¼ë§ˆë‚˜ ë§ì•˜ëŠ”ì§€ ê³„ì‚°í•´ì„œ ë°˜í™˜ 
            this.calculateSmaeCount = function(otherNumber, otherColor, otherShape) {
                return this.isSameNumber(otherNumber) + this.isSameColor(otherColor) + this.isSameShape(otherShape);
            }

            // ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ë‹¤ë¥¸ ì¹´ë“œì˜ ìˆ«ìì™€ ì¼ì¹˜í•˜ëŠ”ì§€ íŒë‹¨ 
            this.isSameNumber = function(otherNumber) {
                return this.getNumber() === otherNumber ? 1 : 0;
            }

            // ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ë‹¤ë¥¸ ì¹´ë“œì˜ ìƒ‰ê¹”ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ íŒë‹¨ 
            this.isSameColor = function(otherColor) {
                return this.getColor() === otherColor ? 1 : 0;
            }

            // ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ë‹¤ë¥¸ ì¹´ë“œì˜ ëª¨ì–‘ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ íŒë‹¨ 
            this.isSameShape = function(otherShape) {
                return this.getShape() === otherShape ? 1 : 0;
            }

            // ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ìê°’ê³¼ ë§ëŠ”ì§€ íŒë‹¨ 
            this.isSameCardImageNumber = function(otherCardImageNumber) {
                return cardImageNumber === otherCardImageNumber ? true : false;
            }

            // ì¹´ë“œ ë’¤ì§‘ê¸° 
            this.flip = function() {
                state = !state;
            }
        }

        // 2. í”Œë ˆì´ì–´ ê°ì²´ : ì´ë¦„, ì ìˆ˜, ë‚¨ì€ ê²Œì„ íšŸìˆ˜ ì €ì¥í•˜ê³  ê·¸ì™€ ê´€ë ¨ëœ ì‘ì—…ì„ ë¬¶ìŒ 
        function Player(name = "anonymous", score = 0, leftCount = 15) {
            var name = name; // ì´ë¦„ 
            var score = score; // ì ìˆ˜ 
            var leftCount = leftCount; // ë‚¨ì€ ê²Œì„ íšŸìˆ˜

            // ìì‹ ì´ ìŠ¹ìì¸ì§€, íŒ¨ìì¸ì§€, ë¬´ìŠ¹ë¶€ì¸ì§€ íŒë‹¨(-1 : ìê¸°ê°€ ì´ê¹€, 0 : ë¬´ìŠ¹ë¶€, 1 : ìƒëŒ€ê°€ ì´ê¹€)
            this.isWinner = function(otherPlayerScore) {
                return score > otherPlayerScore ?  -1 : (score === otherPlayerScore ? 0: 1);
            }

            // ë‚¨ì€ íšŸìˆ˜ê°€ ìˆëŠ”ì§€ ì‘ë‹µ  
            this.isLeftCount =  function() {
                return leftCount > 0 ? true : false;
            }

            // ì´ë¦„ ë°˜í™˜ 
            this.getName = function() {
                return name;
            }

            // ì ìˆ˜ ë°˜í™˜ 
            this.getScore = function() {
                return score;
            }

            // ë‚¨ì€ íšŸìˆ˜ ë°˜í™˜ 
            this.getLeftCount = function() {
                return leftCount;
            }

            // ìì‹ ì˜ ì ìˆ˜ì— ì¼ì •ëŸ‰ë§Œí¼ ë”í•¨ 
            this.addScore = function(amount) {
                score += amount;
            }

            // ë‚¨ì€ íšŸìˆ˜ë¥¼ 1 ê°ì†Œ 
            this.decreaseCount = function() {
                if (leftCount > 0) {
                    leftCount--;
                }
            }

        }

        // 3. ê²Œì„ ë§¤ë‹ˆì € ê°ì²´ : ì¹´ë“œê°ì²´ì™€ í”Œë ˆì´ì–´ ê°ì²´ë¥¼ í¬í•¨í•´ì„œ, ì „ì²´ í”„ë¡œê·¸ë¨ì˜ íë¦„ì„ ë‹´ë‹¹
        function GameManager() {
            var cardImageNumbers = []; // ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì ì €ì¥  
            const FIRST_CARD_IMAGE_NUMBER = 0;
            const LAST_CARD_IMAGE_NUMBER = 51;
            for (let number = FIRST_CARD_IMAGE_NUMBER; number <= LAST_CARD_IMAGE_NUMBER; number++) {
                cardImageNumbers.push(number);
            }
            var cards = []; // ìƒì„±ëœ ì¹´ë“œ ê°ì²´ë¥¼ ì €ì¥  
            var currentPlayerTwoSelectedCard = []; // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ ì¹´ë“œë¥¼ ì €ì¥ 
            var firstPlayer; // ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ ì €ì¥ 
            var secondPlayer; // ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ ì €ì¥ 
            var currentPlayer; // í˜„ì¬ í”Œë ˆì´ì–´ ì €ì¥ 
            var gameResultMessage = new Map(); // ê²Œì„ ê²°ê³¼ ë§µì— ì €ì¥ 


            // ê²Œì„ì´ ì‹œì‘í–ˆì„ ë•Œ ì´ˆê¸°í™”ë©´ê³¼ ê° ê°ì²´ ìƒíƒœ êµ¬ì„±
            this.startGame = function() {
                this.shuffleAllCardImageNumber(); // ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì ì„ê¸°
                this.createAllCard(); // ì¹´ë“œ ê°ì²´ ìƒì„±í•´ì„œ ë°°ì—´ì— ë‹´ê¸°
                this.createAllPlayer(); // í”Œë ˆì´ì–´ ê°ì²´ ìƒì„±
                this.createGameResultMessage(); // ê²Œì„ ë©”ì‹œì§€ ì €ì¥
                this.appendAllCardTag(); // ì¹´ë“œ íƒœê·¸ ìƒì„±í•´ì„œ html ë¬¸ì„œì— ì¶”ê°€
                this.appendAllPlayerTag(); // í”Œë ˆì´ì–´ íƒœê·¸ ìƒì„±í•´ì„œ html ë¬¸ì„œì— ì¶”ê°€ 
            }

            // ê²Œì„íŒ ì—…ë°ì´íŠ¸ 
            this.updateGame = function() {
                this.hideAllFrontCard(); // ì•ë©´ì¸ ì¹´ë“œ ëª¨ë‘ ë‹¤ ë’¤ì§‘ê¸° 
                this.shuffleAllCard(); // ì¹´ë“œ ê°ì²´ ë°°ì—´ ì„ê¸°
                this.appendAllCardTag(); // ì¹´ë“œ íƒœê·¸ ìƒì„±í•´ì„œ ë¶™ì´ê¸° 
                this.updateAllPlayerTag(); // í”Œë ˆì´ì–´ íƒœê·¸ ì—…ë°ì´íŠ¸
            }

            // ëª¨ë“  ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ìë¥¼ ì„ìŒ 
            this.shuffleAllCardImageNumber = function() {
                for (let i=0; i<100; i++) {
                    cardImageNumbers.sort(() => Math.random() - 0.5);
                }
            }

            // ëª¨ë“  ì¹´ë“œ ê°ì²´ë¥¼ ìƒì„± 
            this.createAllCard = function() {
                cards.splice("");
                for (cardImageNumber of cardImageNumbers) {
                    cards.push(new Card(cardImageNumber));
                }
            }

            // ëª¨ë“  í”Œë ˆì´ì–´ ê°ì²´ë¥¼ ìƒì„± 
            this.createAllPlayer = function() {
                firstPlayer = new Player("ë°˜í•­í•˜ê³  ì‹¶ì–´ğŸ‘¨ğŸ»â€ğŸ¤", 0, 5); // ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ ì €ì¥ 
                secondPlayer = new Player("ë¨¹ëŠ”ê²Œ ìµœê³ ì§€ğŸ‘©ğŸ»â€ğŸ³", 0, 5); // ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ ì €ì¥
                currentPlayer = null;
            }

            // ëª¨ë“  ê²Œì„ ê²°ê³¼ ë©”ì‹œì§€ë¥¼ ìƒì„±í•´ì„œ ë§µì— ê²Œì„ ê²°ê³¼ ìˆ«ìì™€ ë§¤í•‘í•˜ì—¬ ì €ì¥ 
            this.createGameResultMessage = function() {
                gameResultMessage.set(-1, `"${firstPlayer.getName()}"ì´ ì´ê²¼ìŠµë‹ˆë‹¤.ğŸ”Š`); 
                gameResultMessage.set(0, `"${firstPlayer.getName()}"ì™€ "${secondPlayer.getName()}"ì˜ ì ìˆ˜ê°€ ê°™ìŠµë‹ˆë‹¤. ë¬´ìŠ¹ë¶€ì…ë‹ˆë‹¤.ğŸ”Š`);
                gameResultMessage.set(1, `${secondPlayer.getName()}ê°€ ì´ê²¼ìŠµë‹ˆë‹¤.ğŸ”Š`);
            }

            // ëª¨ë“  ì¹´ë“œ ê°ì²´ì˜ íƒœê·¸ë¥¼ ìƒì„±í•´ì„œ ì¶”ê°€ 
            this.appendAllCardTag = function() {
                const cardArea = document.getElementById("cardArea");
                                    
                cardArea.innerHTML = "";
                for (card of cards) {
                    const e = document.createElement("img");
                    if (card.isFront()) {
                        e.setAttribute("src", `img/card_img/${card.getCardImageNumber()}.png`);
                    } else {
                            e.setAttribute("src", `img/card_img/back.png`);
                    }
                    e.setAttribute("data-number", card.getCardImageNumber());
                    e.setAttribute("onclick", "selectCardTag(this)");
                    cardArea.appendChild(e);
                }
            }

            // ëª¨ë“  í”Œë ˆì´ì–´ ê°ì²´ì˜ íƒœê·¸ë¥¼ ìƒì„±í•´ì„œ ì¶”ê°€ 
            this.appendAllPlayerTag = function() {
                const firstPlayerArea = document.getElementById("firstPlayerArea");
                const secondPlayerArea = document.getElementById("secondPlayerArea");
                firstPlayerArea.innerHTML = `<h3 class="title">${firstPlayer.getName()}</h3><p class="title"> ğŸ¯ ë‚¨ì€ íšŸìˆ˜ ${firstPlayer.getLeftCount()} ì ìˆ˜ëŠ” ${firstPlayer.getScore()}</p>`;
                secondPlayerArea.innerHTML = `<h3 class="title">${secondPlayer.getName()}</h3><p class="title"> ğŸ¯ ë‚¨ì€ íšŸìˆ˜ ${secondPlayer.getLeftCount()} ì ìˆ˜ëŠ” ${secondPlayer.getScore()}</p>`;
            }

            // ì•ë©´ì¸ ì¹´ë“œë¥¼ ëª¨ë‘ ë’·ë©´ìœ¼ë¡œ ëŒë ¤ì¤Œ 
            this.hideAllFrontCard = function() {
                for (card of cards) {
                    if (card.isFront()) {
                        card.flip();
                    }
                }
            }

            // ëª¨ë“  ì¹´ë“œ ê°ì²´ë¥¼ ì„ìŒ 
            this.shuffleAllCard = function() {
                for (let i = 0; i < 100; i++) {
                    cards.sort(() => Math.random() - 0.5);
                }
            }


            // ëª¨ë“  í”Œë ˆì´ì–´ì˜ íƒœê·¸ ì—…ë°ì´íŠ¸ 
            this.updateAllPlayerTag = function() {
                const firstPlayerArea = document.getElementById("firstPlayerArea");
                const secondPlayerArea = document.getElementById("secondPlayerArea");
                firstPlayerArea.innerHTML = `<h3 class="title">${firstPlayer.getName()}</h3><p class="title"> ğŸ¯ ë‚¨ì€ íšŸìˆ˜ ${firstPlayer.getLeftCount()} ì ìˆ˜ëŠ” ${firstPlayer.getScore()}</p>`;
                secondPlayerArea.innerHTML = `<h3 class="title">${secondPlayer.getName()}</h3><p class="title"> ğŸ¯ ë‚¨ì€ íšŸìˆ˜ ${secondPlayer.getLeftCount()} ì ìˆ˜ëŠ” ${secondPlayer.getScore()}</p>`;
            }

            
            // ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ë¥¼ í˜„ì¬ í”Œë ˆì´ì–´ë¡œ ì„¤ì • 
            this.setFirstPlayerOnCurrentPlayer = function() {
                currentPlayer = firstPlayer;
            }

            // ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ë¥¼ í˜„ì¬ í”Œë ˆì´ì–´ë¡œ ì„¤ì • 
            this.setSecondPlayerOnCurrentPlayer = function() {
                currentPlayer = secondPlayer;
            }

            // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì¹´ë“œë¥¼ ì„ íƒí–ˆì„ ë•Œ ì²˜ë¦¬í•´ì¤˜ì•¼ í•  ì‘ì—… 
            this.occurPlayerSelectCard = function(selectedCardTag) {
                if (!(currentPlayer instanceof Player)) { // í˜„ì¬ í”Œë ˆì´ì–´ ê°ì²´ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° 
                    alert("í”Œë ˆì´ì–´ ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ê²Œì„ì„ ì§„í–‰í•˜ì„¸ìš”.ğŸ”Š");
                    return;
                }

                if (!currentPlayer.isLeftCount()) { // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ëª¨ë“  íšŸìˆ˜ë¥¼ ë‹¤ ì†Œì§„í•œ ê²½ìš°
                    alert(`"${currentPlayer.getName()}"ì˜ ê²Œì„ íšŸìˆ˜ê°€ ${currentPlayer.getLeftCount()}ì…ë‹ˆë‹¤.ğŸ”Š`);
                    alert(`"${currentPlayer.getName()}"ì˜ ì ìˆ˜ëŠ” ${currentPlayer.getScore()}ì…ë‹ˆë‹¤.ğŸ”Š`);
                    this.updateAllPlayerTag();
                    return;
                }

                if (currentPlayerTwoSelectedCard.length === 2) { // ë‘ê°œë¥¼ ì´ë¯¸ ì„ íƒí–ˆìœ¼ë©´ íŒë‹¨í•˜ê¸°
                    const amount = this.getSameAmountBetweenTwoSelectedCard();
                    currentPlayer.addScore(amount); // í˜„ì¬ í”Œë ˆì´ì–´ì— ì ìˆ˜ ì¶”ê°€ 
                    currentPlayer.decreaseCount(); // í˜„ì¬ í”Œë ˆì´ì–´ ê²Œì„ íšŸìˆ˜ 1 ê°ì†Œ
                    this.updateAllPlayerTag(); // ê° í”Œë ˆì´ì–´ ê¸°ë¡ ì—…ë°ì´íŠ¸ 
                    return;
                }

                const currentPlayerSelectedCard = this.findSelectedCardByTag(selectedCardTag);
                if (currentPlayerSelectedCard.isFront()) return; // ì•ë©´ì¸ê±°ë§‰ì•„ë²„ë¦¬ê¸° 
                currentPlayerTwoSelectedCard.push(currentPlayerSelectedCard);
                this.showSelectedCard(selectedCardTag);
            }

            // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ 2ê°œì˜ ì¹´ë“œ ì¤‘ì—ì„œ ë¬´ì—‡ì´ ë§ëŠ”ì§€ ìˆ«ìë¡œ ë°˜í™˜(ìˆ«ì, ìƒ‰ê¹”, ë„í˜•)
            this.getSameAmountBetweenTwoSelectedCard = function() {
                const firstSelectedCard = currentPlayerTwoSelectedCard.shift();
                const secondSelectedCard = currentPlayerTwoSelectedCard.shift();
                const amount = firstSelectedCard.calculateSmaeCount(secondSelectedCard.getNumber(), secondSelectedCard.getColor(), secondSelectedCard.getShape());
                    
                if (amount === 0) { // ìˆ«ì, ì»¬ëŸ¬, ëª¨ì–‘ ë‹¤ ì•ˆë§ì€ ê²½ìš° ë’·ë©´ìœ¼ë¡œ ëŒë¦¬ê¸° 
                    const cardAreaChildren = document.getElementById("cardArea").children; // í•´ë‹¹ ì¹´ë“œ ê°ì²´ì— í•´ë‹¹í•˜ëŠ” íƒœê·¸ì˜ ì†ì„± ì—…ë°ì´íŠ¸(ë’·ë©´ìœ¼ë¡œ ì„¤ì •)
                    firstSelectedCard.flip(); // ì²«ë²ˆì§¸ ì¹´ë“œ ë’¤ì§‘ê¸° 
                    secondSelectedCard.flip(); // ë‘ë²ˆì§¸ ì¹´ë“œ ë’¤ì§‘ê¸° 
                    for (child of cardAreaChildren) {
                        if (firstSelectedCard.isSameCardImageNumber(parseInt(child.getAttribute("data-number"))) || secondSelectedCard.isSameCardImageNumber(parseInt(child.getAttribute("data-number")))) {
                            child.setAttribute("src", `img/card_img/back.png`);
                        } 
                    }
                }
            
                return amount;
            }

            // ì„ íƒí•œ íƒœê·¸ì™€ ë§¤ì¹­ë˜ëŠ” ì¹´ë“œ ê°ì²´ ì°¾ê¸° 
            this.findSelectedCardByTag = function(selectedCardTag) {
                const selectedCardImageNumber = parseInt(selectedCardTag.getAttribute("data-number"));
                
                let currentPlayerSelectedCard = null;
                for (card of cards) {
                    if (card.isSameCardImageNumber(selectedCardImageNumber)) {
                        currentPlayerSelectedCard = card;
                        break;
                    }
                }

                return currentPlayerSelectedCard;
            }

            // ì„ íƒí•œ ì¹´ë“œë¥¼ í™”ë©´ì— ë³´ì—¬ì¤Œ 
            this.showSelectedCard = function(selectedCardTag) {
                if (!currentPlayer.isLeftCount()) return; // í˜„ì¬ í”Œë ˆì´ì–´ì˜ ê²Œì„ íšŸìˆ˜ê°€ 0ì¸ ê²½ìš° 
                const currentPlayerSelectedCard = this.findSelectedCardByTag(selectedCardTag); // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ íƒœê·¸ì— í•´ë‹¹í•˜ëŠ” ì¹´ë“œ ê°ì²´ ì°¾ê¸° 
                
                if (currentPlayerSelectedCard.isFront()) return; // ì¹´ë“œ ê°ì²´ê°€ ì•ë©´ì´ë©´ ìŠ¤í‚µ 
                currentPlayerSelectedCard.flip(); // ì¹´ë“œ ê°ì²´ê°€ ë’·ë©´ì´ì˜€ìœ¼ë©´, ëŒë¦¬ê¸° 
                selectedCardTag.setAttribute("src", `img/card_img/${currentPlayerSelectedCard.getCardImageNumber()}.png`);  // ì¹´ë“œ íƒœê·¸ì˜ ì†ì„± ì—…ë°ì´íŠ¸ 
            }

            // ê²Œì„ ê²°ê³¼ë¥¼ ìˆ«ìë¡œ ì¡°íšŒ 
            this.getGameResult = function() {
                if (firstPlayer.isLeftCount() || secondPlayer.isLeftCount()) { // í”Œë ˆì´ì–´ì˜ ê²Œì„ íšŸìˆ˜ê°€ ë‚¨ì•„ìˆëŠ” ê²½ìš°, ìŠ¤í‚µ 
                    alert(`ì•„ì§ í”Œë ˆì´ì–´ì˜ íŒìˆ˜ê°€ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤. ëª¨ë“  í”Œë ˆì´ì–´ì˜ íŒìˆ˜ ë‹¤ ëë‚˜ë©´ ìš”ì²­í•´ì£¼ì„¸ìš”.ğŸ”Š`);
                    return false;
                }

                const result = firstPlayer.isWinner(secondPlayer.getScore()); // ê²Œì„ ê²°ê³¼ë¥¼ ìˆ«ìë¡œ ë°˜í™˜
                this.notifyGameResult(result); // ìˆ«ì ê²°ê³¼ë¥¼ ë¬¸ì ê²°ê³¼ë¡œ ë°˜í™˜í•´ì„œ ì¶œë ¥ 
                return true;
            }

            // ê²Œì„ ê²°ê³¼ ë©”ì‹œì§€ë¡œ ë°œí‘œ 
            this.notifyGameResult = function(result) {
                const resultMessage = gameResultMessage.get(result);
                alert(resultMessage);
            }

            // í˜„ì¬ í”Œë ˆì´ì–´ì˜ ì´ë¦„ì„ ë°˜í™˜ 
            this.getCurrentPlayerName = function() {
                return currentPlayer.getName();
            }

            // ëª¨ë“  í”Œë ˆì´ì–´ë¥¼ ì´ˆê¸°í™” 
            this.resetAllPlayer = function() {
                alert("í”Œë ˆì´ì–´ì˜ ê¸°ë¡ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.ğŸ’¥")
                firstPlayer = new Player("ë°˜í•­í•˜ê³  ì‹¶ì–´ğŸ‘¨ğŸ»â€ğŸ¤", 0, 5); // ì²«ë²ˆì§¸ í”Œë ˆì´ì–´ ì €ì¥ 
                secondPlayer = new Player("ë¨¹ëŠ”ê²Œ ìµœê³ ì§€ğŸ‘©ğŸ»â€ğŸ³", 0, 5); // ë‘ë²ˆì§¸ í”Œë ˆì´ì–´ ì €ì¥ 
            }
        }

    </script>
</body>
</html>
