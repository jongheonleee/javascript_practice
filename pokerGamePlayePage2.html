<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            background-image: url("img/poker.png");
        }
        img {
            margin-top: 5px;
            margin-bottom: 5px;
            margin-left: 2px;
            margin-right: 2px;
            width: 100px;
            height: 100px;
        }
        #container {
            display: grid;
            grid-template-columns: 1fr 3fr 1fr;
        }
        #gameArea {
            text-align: center;
            display: inline;
            height: 500px;
            width: 500px;
            position: static;
            margin-top: 50px;
            margin-bottom: 50px;
            margin-left: 10px;
            margin-right: 10px;
        }
        #btnArea {
            text-align: center
        }
        button {
            display: inline-block;
            margin: 0;
            padding: 0;
            position: relative;
            border: none;
            min-width: 200px;
            min-height: 50px;
            background: linear-gradient(
                90deg,
                rgba(129, 230, 217, 1) 0%,
                rgba(79, 209, 197, 1) 100%
            );
            border-radius: 1000px;
            color: darkslategray;
            cursor: pointer;
            box-shadow: 12px 12px 24px rgba(79, 209, 197, 0.64);
            font-weight: 700;
            transition: 0.3s;
        }
        #firstPlayerArea {
            text-align: center;
            display: inline;
            float : left;
            margin-top: 3em;
            margin-bottom: 3em;
        }
        #secondPlayerArea {
            text-align: center;
            display: inline;
            float : right;
            margin-top: 3em;
            margin-bottom: 3em;
        }
        #playerRecordArea {
            display: inline;
        }
        #playerArea {
            display: inline;
        }

        .title {
            color: white;
            font-style: italic;
            font-size : 25px;
            display: inline;
        }

        #leftPlayerArea {
            float : left;
        }
        #rightPlayerArea {
            float : right;
        }

        .record {
            color : yellow;
            font-style: oblique;
        }
        
    </style>
</head>

<body>
    <h1 style="text-align: center; color : white">Poker Game ğŸ°</h1>
    <div style="text-align: center; color : white;">
        <input id="userInformation" type="text">
        <button onclick="clickCreatePlayerButton('userInformation')">Create Your Player!!ğŸ¤¹ğŸ»â€â™‚ï¸</button>
    </div>
    

    <span>
        <div id="firstPlayerArea"></div>
        <div id="secondPlayerArea"></div>
    </span>

    <br>
    <br>
    <br>
    <br>
    <br>
    <br>


    <div id="gameArea">
        <div id="cardArea"></div>
    </div>

    <br>
    <br>
    <br>
    
    <div id="btnArea">
        <button onclick="selectFirstPlayer()">
            í”Œë ˆì´ì–´1 ì‹œì‘
        </button>
    
        <button onclick="getGameResult()">
            ê²Œì„ ê²°ê³¼ ì¶œë ¥ 
        </button>
    
        <button onclick="selectSecondPlayer()">
            í”Œë ˆì´ì–´2 ì‹œì‘
        </button>
        <button onclick="clickHintButton()">
            íŒíŠ¸
        </button>
        <button onclick="clickRuleButton()">
            ë£° ì„¤ëª…
        </button>
    </div>
    <script>
        window.onload = function() {
            alert('ì–´ì„œì™€ ì—¬ëŠ˜ì´ì˜ "Poker Game ğŸ°"ì€ ì²˜ìŒì´ì§€?!ğŸ’¥');
            gameModerator = new GameModerator();
            gameModerator.startGame();
        }

        function clickRuleButton() {
            gameModerator.explainRule();
        }

    // í´ë˜ìŠ¤ ì •ì˜
        // 1. ì•„ë°”íƒ€ ìƒì„±ê¸° âœ…
        class AvatorGenerator {
            // ëœë¤ ì•„ë°”íƒ€ ì €ì¥ 
            #avators;
            // ì•„ë°”íƒ€ ë‚œìˆ˜ ìƒì„±ê¸° 
            #randomGeneratorForShuffleAvators;

            constructor() {
                // í”„ë¼ì´ë¹— í•„ë“œì— ê¸°ë³¸ê°’ ì„¸íŒ… 
                this.#avators = ["ğŸ¤¹ğŸ»â€â™‚ï¸", "ğŸ‘¨ğŸ»â€ğŸ¤", "ğŸ‘©ğŸ»â€ğŸ³", "ğŸ¦¹ğŸ»â€â™‚ï¸", "ğŸ¤µğŸ»â€â™‚ï¸", "ğŸ§ğŸ»â€â™€ï¸", "ğŸ¦¸ğŸ»â€â™€ï¸", "ğŸ§™ğŸ»", "ğŸ‘°ğŸ»â€â™€ï¸"];
                this.#randomGeneratorForShuffleAvators = () => Math.random() - 0.5;
            }

            // ì•„ë°”íƒ€ ìƒì„± 
            createAvator() {
                return this.selectRandomAvator();
            }

            // ëœë¤ ì•„ë°”íƒ€ ì„ íƒ 
            selectRandomAvator() {
                this.suffleAllAvator();
                return this.#avators[0];
            }

            // ì•„ë°”íƒ€ ë°°ì—´ ì„ê¸° 
            suffleAllAvator() {
                for (let i=0; i<100; i++) {
                    this.#avators.sort(this.#randomGeneratorForShuffleAvators);
                }
            }

        }  


        // 2. ì¹´ë“œ ê°ì²´ âœ…
        class Card {
            // ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì
            #cardImageNumber;
            // ì¹´ë“œ ìƒíƒœ(ì•ë©´/ë’·ë©´), ë¶ˆë¦° 
            #front;

            constructor(cardImageNumber = 0, front = false) {
                this.#cardImageNumber = cardImageNumber;
                this.#front = front;
            }

            isFront() {
                return this.#front;
            }

            getNumber() {
                return this.#cardImageNumber % 13;
            }

            getShape() {
                return Math.floor(this.#cardImageNumber/13);
            }

            getColor() {
                return Math.floor(this.#cardImageNumber/13) % 2 === 0 ? 'red' : 'black';
            }

            getCardImageNumber() {
                return this.#cardImageNumber;
            }

            calculateSameCount(ohterNumber, otherColor, otherShape) {
                return this.isSameNumber(otherNumber) + this.isSameColor(otherColor) + this.isSameShape(otherShape);
            }

            isSameNumber(otherNumber) {
                return this.getNumber() === otherNumber ? 1 : 0;
            }

            isSameColor(otherColor) {
                return this.getColor() === otherColor ? 1 : 0;
            }

            isSameShape(otherShape) {
                return this.getShape() === otherShape ? 1 : 0;
            }
            isSameCardImageNumber(otherCardImageNumber) {
                return this.#cardImageNumber === otherCardImageNumber;
            }
            flip() {
                this.#front = !this.#front;
            }
        }

        // 3. ë± ê°ì²´ âœ…
        class Deck {
            #FRIST_CARD_IMAGE_NUMBER;
            #LAST_CARD_IMAGE_NUMBER;
            #NUMBER_OF_CARD;
            #MAX_HINT_COUNT;
            #MAX_NUMBER_OF_SELECTED_CARD;

            #cardAllImageNumber;
            #cards;
            #selectedCardForHint;
            #currentPlayerTwoSelectedCard;

            #randomGenerator;
            #randomNumberGeneratorForShuffle;

            constructor() {
                this.#FRIST_CARD_IMAGE_NUMBER = 0;
                this.#LAST_CARD_IMAGE_NUMBER = 51;
                this.#NUMBER_OF_CARD = 52;
                this.#MAX_HINT_COUNT = 3;
                this.#MAX_NUMBER_OF_SELECTED_CARD = 2;

                this.#cardAllImageNumber = [];
                this.#cards = [];
                this.#selectedCardForHint = [];
                this.#currentPlayerTwoSelectedCard = [];

                this.#randomGenerator = () => Math.floor(Math.random()*this.#NUMBER_OF_CARD)
                this.#randomNumberGeneratorForShuffle = () => Math.random() - 0.5;
            }

            createDeck() {
                // ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì ë°°ì—´ ì„ê¸° 
                this.shuffleAllCardImageNumber();
                // ëª¨ë“  ì¹´ë“œ ê°ì²´ ìƒì„± 
                this.createAllCard();
            }

            shuffleAllCardImageNumber() {
                for (let i=0; i<100; i++) {
                    this.#cardAllImageNumber.sort(this.randomNumberGeneratorForShuffleCardImageNumber);
                }
            }

            createAllCard() {
                for (number of this.#cardAllImageNumber) {
                    this.#cards.push(new Card(number, false));
                }
            }

            selectRandomCard() {
                const randomNumber = this.#randomGenerator();

                for (card of cards) {
                    if (card.isSameCardImageNumber(randomNumber)) {
                        return card;
                    }
                }
            }

            // ğŸ“Œ true/false ë°˜í™˜ 
            showCardForHint() {
                if (this.isAllCardFront()) {
                    alert("ì´ë¯¸ ëª¨ë“  ì¹´ë“œê°€ ì•ë©´ì…ë‹ˆë‹¤.");
                    return;
                }

                while (true) {
                    const selectedCard = this.#selectedCardForHint();
                    if (!selectedCard.isFront()) {
                        this.#selectedCardForHint.push(selectedCard);
                        selectedCard.flip();
                        // ì´í›„ì— ê²Œì„ ì§„í–‰ìë‘ í”Œë ˆì´ì–´ ì²˜ë¦¬
                            // ê²Œì„ ì§„í–‰ì ê²Œì„íŒ ì—…ë°ì´íŠ¸
                            // í˜„ì¬ í”Œë ˆì´ì–´ì˜ íŒíŠ¸ ê°œìˆ˜ 1 ì¹´ìš´íŠ¸ ë‹¤ìš´
                        return true;
                    }
                }

                return false;
            }

            isAllCardFront() {
                for (card of this.#cards) {
                    if (!card.isFront()) {
                        return false;
                    }
                }

                return true;
            }

            getLengthOfCardForHint() {
                return this.#selectedCardForHint.length;
            }

            
            indexOfCardForHint(index) {
                if (!(0 <= index && index < this.getLengthOfCardForHint())) {
                    alert(`ì˜ëª»ëœ ì¸ë±ìŠ¤ ë²”ìœ„ì…ë‹ˆë‹¤. ${index}`);
                    return;
                }

                return this.#selectedCardForHint[index];
            }

            getLengthOfCurrentPlayerSelectedCard() {
                return this.#currentPlayerTwoSelectedCard.length;
            }

            indexOfCurrentPlayerSelectedCard(index) {
                if (!(0 <= index && index < this.getLengthOfCurrentPlayerSelectedCard())) {
                    alert(`ì˜ëª»ëœ ì¸ë±ìŠ¤ ë²”ìœ„ì…ë‹ˆë‹¤. ${index}`);
                    return;
                }

                return this.#currentPlayerTwoSelectedCard[index];
            }

            getLengthOfAllCard() {
                return this.#cards.length;
            }

            indexOfCard(index) {
                if (!(0 <= index && index < this.getLengthOfAllCard())) {
                    alert(`ì˜ëª»ëœ ì¸ë±ìŠ¤ ë²”ìœ„ì…ë‹ˆë‹¤. ${index}`);
                    return;
                }

                return this.#cards[index];
            }

            shuffle() {
                if (this.#cards.length === 0) {
                    this.createDeck();
                }

                this.initAllCard();

                for (let i=0; i<100; i++) {
                    this.#cards.sort(this.#randomNumberGeneratorForShuffle);
                }
            }

            initAllCard() {
                for (card of this.#cards) {
                    if (card.isFront()) {
                        card.flip();
                    }
                } 
            }
            connectCardToCardImageNumber() {
                this.#cardAllImageNumber.splice(0);

                for (card of this.#cards) {
                    this.#cardAllImageNumber.push(card.getCardImageNumber());
                }
            }

            initDeck() {
                this.shuffle();
                this.initAllCard();
                this.connectCardToCardImageNumber();
                this.#selectedCardForHint.splice(0);
                this.#currentPlayerTwoSelectedCard.splice(0);
            }

            findCard(cardImageNumber) {
                for (card of this.#cards) {
                    if (card.isSameCardImageNumber(cardImageNumber)) {
                        return card;
                    }
                }
            }

            isCurrentPlayerSelectedTwoCard() {
                return this.#currentPlayerTwoSelectedCard.length === this.#MAX_NUMBER_OF_SELECTED_CARD;
            }

            pushCurrentPlayerSelectedCard(card) {
                if (this.isCurrentPlayerSelectedTwoCard()) return;

                this.#currentPlayerTwoSelectedCard.push(card);
            }

            shuftCurrentPlayerSelctedCard() {
                if (this.#currentPlayerTwoSelectedCard.length === 0) return;
                return this.#currentPlayerTwoSelectedCard.shift();
            }

            isHintCard() {
                return this.#selectedCardForHint.length > 0;
            }
            
        }


        // 4. í”Œë ˆì´ì–´ ê°ì²´Â âœ…
        class Player {
            #name;
            #score;
            #leftCount;
            #leftHintCount;

            constructor(name) {
                this.#name = name;
                this.#score = 0;
                this.#leftCount = 10;
                this.#leftHintCount = 3;
            }

            isWinner(otherPlayerScore) {
                return this.#score > otherPlayerScore ? -1 : (this.#score === otherPlayerScore ? 0 : 1);
            }

            isLeftCount() {
                return this.#leftCount > 0;
            }

            isLeftHintCount() {
                return this.#leftHintCount > 0;
            }

            getName() {
                return this.#name;
            }

            getLeftCount() {
                return this.#leftCount;
            }

            getLeftHintCount() {
                return this.#leftHintCount;
            }

            addScore(amount) {
                this.#score += amount;
            }

            decreaseCount() {
                if (this.#leftCount > 0) {
                    this.#leftCount--;
                }
            }

            decreaseHintCount() {
                if (this.#leftHintCount > 0) {
                    this.#leftHintCount--;
                }
            }
        }


        // 5. ê²Œì„ ê²°ê³¼ ê°ì²´ 
        class GameMessage {
            #resultMessage;
            #ruleMessage;

            constructor() {
                this.#ruleMessage = new Map();
                this.#ruleMessage = ['ì•ˆë…•í•˜ì„¸ìš”"Poker Game ğŸ°"ì— ì˜¤ì‹ ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. í¬ì»¤ ê²Œì„ì„ ì‹œì‘í•˜ê¸° ì•ì„œ ê°„ë‹¨í•˜ê²Œ ë£°ì„ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤. ê° í”Œë ˆì´ì–´ëŠ” 5íŒì˜ íŒìˆ˜ì™€ 3ë²ˆì˜ íŒíŠ¸ ê¸°íšŒê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤. ë˜í•œ, í”Œë ˆì´ì–´ëŠ” í•œíŒë‹¹ 2ê°œì˜ ì¹´ë“œë¥¼ ì„ íƒí•˜ë©´ë©ë‹ˆë‹¤. íŒíŠ¸ì˜ ê²½ìš° ë¬´ì‘ìœ„ë¡œ ë’·ë©´ì˜ ì¹´ë“œ ì¤‘ í•˜ë‚˜ë¥¼ ë’¤ì§‘ìŠµë‹ˆë‹¤. ì´í›„ì— ì¹´ë“œë¥¼ ë½‘ì•˜ì„ ë•Œ í•´ë‹¹ ì¹´ë“œì™€ íŒíŠ¸ ì¹´ë“œë¥¼ ë¹„êµí•˜ì—¬ ì ìˆ˜ë¥¼ í•©ì‚°í•©ë‹ˆë‹¤. ì´ë•Œ, ì¹´ë“œì˜ ìˆ«ì, ëª¨ì–‘, ìƒ‰ê¹”ì´ íŒë‹¨ ê¸°ì¤€ì´ ë˜ë©° 3ì¤‘ì— 1ê°œë¼ë„ ë§ì¶”ë©´ 1ì ì„ íšë“í•˜ê³  2ê°œë¥¼ ë§ì¶”ë©´ 2ì ì„ íšë“í•˜ë©° ë‘ ì¹´ë“œëŠ” ì•ë©´ ìƒíƒœë¡œ ë†“ì—¬ì§‘ë‹ˆë‹¤.'];
            }

            createGameResultMessage(firstPlayerName, secondPlayerName) {
                map.set(-1, `${firstPlayerName}ê°€ ì´ê²¼ìŠµë‹ˆë‹¤.`);
                map.set(0, `${firstPlayerName}ì™€ ${secondPlayerName}ê°€ ë¹„ê²¼ìŠµë‹ˆë‹¤.`);
                map.set(1, `${secondPlayerName}ê°€ ì´ê²¼ìŠµë‹ˆë‹¤.`);
            }

            getRuleMessage() {
                return this.#ruleMessage[0];
            }

            getResultMessage(result) {
                return this.#ruleMessage.get(result);
            }
        }

        // 6. ê²Œì„ ì§„í–‰ì ê°ì²´
        class GameModerator {
            #firstPlayer;
            #secondPlayer;
            #currentPlayer;

            #deck;
            #avatorGenerator;
            #gameMessage;


            constructor() {
                this.#firstPlayer = null;
                this.#secondPlayer = null;
                this.#currentPlayer = null;

                this.#deck = new Deck();
                this.#avatorGenerator = new AvatorGenerator();
                this.#gameMessage = new GameMessage();
            }

            explainRule() {
                const message = this.#gameMessage.getRuleMessage();
                alert(message);
            }

            giveHint() {
                this.#deck.selectRandomCard();
            }

            startGame() {
                this.#deck.createAllCard();
                this.#deck.shuffle();
                this.createCardArea();
                this.updatePlayerArea();
            }

            updateGame() {
                this.#deck.shuffle();
                this.updateCardArea();
                this.updatePlayerArea();
            }

            updateCardArea() {
                const cardAreaChildren = document.getElementById("cardArea").children();

                for (child of cardAreaChildren) {
                    for (let i=0; i<this.#deck.getLengthOfAllCard(); i++) {
                        const card = deck.indexOfCard(i);
                        if (card === null) return;

                        if (card.isSameCardImageNumber(parseInt(child.getAttribute("data-number")))) {
                            if (card.isFront()) {
                                child.setAttribute("src", `img/card_img/${card.getCardImageNumber()}.png`);
                            }
                        }
                    }
                }
            }

            createGameMessage() {
                this.#gameMessage.createGameResultMessage(this.#firstPlayer.getName(), this.#secondPlayer.getName());
            }

            createCardArea() {
                // ì¹´ë“œ ì˜ì—­ íƒœê·¸ ì°¸ì¡° 
                const cardArea = document.getElementById("cardArea");
                // í•´ë‹¹ ì˜ì—­ ë‚´ë¶€ HTML ì´ˆê¸°í™” 
                cardArea.innerHTML = "";

                for (let i=0; i<this.#deck.getLengthOfAllCard(); i++) {
                    const card = deck.indexOfCard(i);
                    const imgTag = document.createElement("img");

                    // ì¹´ë“œê°€ ì•ë©´ì¸ ê²½ìš° 
                    if (card.isFront()) {
                        // ì•ë©´ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° 
                        imgTag.setAttribute("src", `img/card_img/${card.getCardImageNumber()}.png`);
                    } else {
                        // ê·¸ê²Œ ì•„ë‹ˆë©´, ë’·ë©´ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° 
                        imgTag.setAttribute("src", `img/card_img/back.png`);
                    }

                    // íƒœê·¸ì— ì¹´ë“œ ì´ë¯¸ì§€ ìˆ«ì ì €ì¥ 
                    imgTag.setAttribute("data-number", card.getCardImageNumber());
                    // íƒœê·¸ì— í•¨ìˆ˜ ì—°ê²° 
                    imgTag.setAttribute("onclick", "selectCardTag(this)");
                    // ì´ë¯¸ì§€ íƒœê·¸ ì¹´ë“œ ì˜ì—­ íƒœê·¸ì— ì¶”ê°€ 
                    cardArea.appendChild(imgTag);
                }

            }

            createPlayerArea() {
                // ì²« ë²ˆì§¸ í”Œë ˆì´ì–´ ì˜ì—­ê³¼ ë‘ ë²ˆì§¸ í”Œë ˆì´ì–´ ì˜ì—­ ì°¸ì¡° 
                const firstPlayerArea = document.getElementById("firstPlayerArea");
                const secondPlayerArea = document.getElementById("secondPlayerArea");

                // ì²« ë²ˆì¬ í”Œë ˆì´ì–´ì™€ ë‘ ë²ˆì¬ í”Œë ˆì´ì–´ ì˜ì—­ì˜ ë‚´ë¶€ HTML ì´ˆê¸°í™”
                firstPlayerArea.innerHTML = "";
                secondPlayerArea.innerHTML = "";
                
                // ì²« ë²ˆì§¸ í”Œë ˆì´ì–´ê°€ ìƒì„±ëœ ê²½ìš° 
                if (this.#firstPlayer !== null) {
                    // ì²« ë²ˆì§¸ í”Œë ˆì´ì–´ ì˜ì—­ ì—…ë°ì´íŠ¸
                    firstPlayerArea.innerHTML = `<h3 class="title">${this.#firstPlayer.getName()}</h3>`;
                    firstPlayerArea.innerHTML += `<br>`;
                    firstPlayerArea.innerHTML += `<p class="record"><strong>ğŸ‘‰ ë‚¨ì€ íšŸìˆ˜-${this.#firstPlayer.getLeftCount()}, í˜„ì¬ ì ìˆ˜-${this.#firstPlayer.getScore()}, ë‚¨ì€ íŒíŠ¸-${this.#firstPlayer.getLeftHintCount()} ğŸ‘¯â€â™€ï¸</strong></p>`;    
                }
                
                // ë‘ ë²ˆì§¸ í”Œë ˆì´ì–´ê°€ ìƒì„±ëœ ê²½ìš°
                if (this.#secondPlayer !== null) {
                    // ë‘ ë²ˆì§¸ í”Œë ˆì´ì–´ ì˜ì—­ ì—…ë°ì´íŠ¸ 
                    secondPlayerArea.innerHTML = `<h3 class="title">${this.#secondPlayer.getName()}</h3>`
                    secondPlayerArea.innerHTML += `<br>`;
                    secondPlayerArea.innerHTML += `<p class="record"><strong>ğŸ‘‰ ë‚¨ì€ íšŸìˆ˜-${this.#secondPlayer.getLeftCount()}, í˜„ì¬ ì ìˆ˜-${secondPlayer.getScore()}, ë‚¨ì€ íŒíŠ¸-${this.#secondPlayer.getLeftHintCount()} ğŸ‘¯â€â™€ï¸</strong></p>`;
                }
            }

            updatePlayerArea() {
                // ì²« ë²ˆì§¸ í”Œë ˆì´ì–´ ì˜ì—­ê³¼ ë‘ ë²ˆì§¸ í”Œë ˆì´ì–´ ì˜ì—­ ì°¸ì¡° 
                const firstPlayerArea = document.getElementById("firstPlayerArea");
                const secondPlayerArea = document.getElementById("secondPlayerArea");

                // ì²« ë²ˆì¬ í”Œë ˆì´ì–´ì™€ ë‘ ë²ˆì¬ í”Œë ˆì´ì–´ ì˜ì—­ì˜ ë‚´ë¶€ HTML ì´ˆê¸°í™”
                firstPlayerArea.innerHTML = "";
                secondPlayerArea.innerHTML = "";

                firstPlayerArea.innerHTML = `<h3 class="title">${this.#firstPlayer.getName()}</h3>`;
                firstPlayerArea.innerHTML += `<br>`;
                firstPlayerArea.innerHTML += `<p class="record"><strong>ğŸ‘‰ ë‚¨ì€ íšŸìˆ˜-${this.#firstPlayer.getLeftCount()}, í˜„ì¬ ì ìˆ˜-${this.#firstPlayer.getScore()}, ë‚¨ì€ íŒíŠ¸-${this.#firstPlayer.getLeftHintCount()} ğŸ‘¯â€â™€ï¸</strong></p>`;    
                
                secondPlayerArea.innerHTML = `<h3 class="title">${this.#secondPlayer.getName()}</h3>`;
                secondPlayerArea.innerHTML += `<br>`;
                secondPlayerArea.innerHTML += `<p class="record"><strong>ğŸ‘‰ ë‚¨ì€ íšŸìˆ˜-${this.#secondPlayer.getLeftCount()}, í˜„ì¬ ì ìˆ˜-${secondPlayer.getScore()}, ë‚¨ì€ íŒíŠ¸-${this.#secondPlayer.getLeftHintCount()} ğŸ‘¯â€â™€ï¸</strong></p>`;
            }

            setFirstPlayerOnCurrentPlayer() {
                if (this.#firstPlayer === null) {
                    return;
                }

                this.#currentPlayer = this.#firstPlayer;
            }

            setSecondPlayerOnCurrentPlayer() {
                if (this.#secondPlayer === null) {
                    return;
                }

                this.#currentPlayer = this.#secondPlayer;
            }

            occurPlayerSelectCard() {
                if (this.#currentPlayer === null) {
                    alert("í”Œë ˆì´ì–´ ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ê²Œì„ì„ ì§„í–‰í•˜ì„¸ìš”.ğŸ”Š");
                    return;
                }

                if (!this.#currentPlayer.isLeftCount()) {
                    // í˜„ì¬ ìƒíƒœ ì•Œë ¤ì£¼ê¸° 
                    alert(`"${this.#currentPlayer.getName()}"ì˜ ê²Œì„ íšŸìˆ˜ê°€ ${this.#currentPlayer.getLeftCount()}ì…ë‹ˆë‹¤.ğŸ”Š`);
                    alert(`"${this.#currentPlayer.getName()}"ì˜ ì ìˆ˜ëŠ” ${this.#currentPlayer.getScore()}ì…ë‹ˆë‹¤.ğŸ”Š`);
                    // íƒœê·¸ ì—…ë°ì´íŠ¸ 
                    this.updatePlayerArea();
                    return;                    
                }

                // í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ íƒœê·¸ì— ëŒ€ì‘ë˜ëŠ” ì¹´ë“œ ê°€ì ¸ì˜´ 
                const currentPlayerSelectedCard = this.findSelectedCardByTag(selectedCardTag);
                if (currentPlayerSelectedCard.isFront()) {
                    // ì•ë©´ì¸ ê²½ìš° ê±´ë„ˆë›°ê¸°
                    return; 
                }

                // ì²«ë²ˆì§¸ ì¹´ë“œì™€ íŒíŠ¸ ì¹´ë“œ ë¹„êµ, ë²ˆì§¸ ì¹´ë“œì™€ íŒíŠ¸ ì¹´ë“œ ë¹„êµ 
                let sameCountForFirstSelectedCardWithHint = 0;
                let sameCountForSecondSelectecCardWithHint = 0;
                
                // íŒíŠ¸ ì¹´ë“œì™€ ì´ì „ì— ì„ íƒí•œ ì¹´ë“œ ë¨¼ì € ë¹„êµ 
                for (let i=0; i<this.#deck.getLengthOfCardForHint(); i++) {
                    // íŒíŠ¸ ì¹´ë“œ í•˜ë‚˜ì”© ì°¸ì¡°
                    const cardForHint = this.#deck.indexOfCardForHint(i);
                    // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ ì¹´ë“œ í•˜ë‚˜ì”© ì°¸ì¡° 
                    for (let j=0; j<this.#deck.getLengthOfCurrentPlayerSelectedCard(); j++) {
                        const selectedCard = this.#deck.indexOfCard(j);
                        // ì„œë¡œ ì¼ì¹˜í•˜ëŠ” ê°¯ìˆ˜ ì¹´ìš´íŠ¸ 
                        const amount = selectedCard.calculateSameCount(cardForHint.getNumber(), cardForHint.getColor(), cardForHint.getShape());
                        
                        // ì²« ë²ˆì§¸ ì¹´ë“œì¸ ê²½ìš° "ì²« ë²ˆì§¸ ì¹´ë“œì™€ íŒíŠ¸ ì¹´ë“œ ë¹„êµ"ì— ê¸°ë¡
                        if (j === 0) {
                            sameCountForFirstSelectedCardWithHint += amount;
                        } 
                        // ë‘ ë²ˆì§¸ ì¹´ë“œì¸ ê²½ìš° "ë‘ ë²ˆì§¸ ì¹´ë“œì™€ íŒíŠ¸ ì¹´ë“œ ë¹„êµ"ì— ê¸°ë¡
                        else {
                            sameCountForSecondSelectecCardWithHint += amount;
                        }

                        // ìŠ¤ì½”ì–´ ì—…ë°ì´íŠ¸
                        this.#currentPlayer.addScore(amount);
                        // íƒœê·¸ ì—…ë°ì´íŠ¸ 
                        this.updatePlayerArea();
                    }
                }
                
                if (this.#deck.isCurrentPlayerSelectedTwoCard()) {
                    const amount = this.getSameAmountBetweenTwoSelectedCard(sameCountForFirstSelectedCardWithHint, sameCountForSecondSelectecCardWithHint);
                    this.#currentPlayer.addScore(amount);
                    this.#currentPlayer.decreaseCount();
                    this.updatePlayerArea();
                    return;
                }

                this.#deck.pushCurrentPlayerSelectedCard(currentPlayerSelectedCard);
                this.showSelectedCard(selectedCardTag);
            }

            getSameAmountBetweenTwoSelectedCard(sameAmountWithHintForFirstCard, sameAmountWithHintForSecondCard) {
                // í–”ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ ì¹´ë“œ í•œì¥ ë¹¼ë‚´ê¸°(ì²« ë²ˆì§¸ ì¹´ë“œ)
                const firstSelectedCard = this.#deck.shiftCurrentPlayerSelectedCard();
                // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ ì¹´ë“œ í•œì¥ ë¹¼ë‚´ê¸°(ë‘ ë²ˆì§¸ ì¹´ë“œ)
                const secondSelectedCard = this.#deck.shiftCurrentPlayerSelectedCard();
                // ì„œë¡œ ì–¼ë§ˆë‚˜ ë§ëŠ”ì§€ ê³„ì‚° 
                const amount = firstSelectedCard.calculateSameCount(secondSelectedCard.getNumber(), secondSelectedCard.getColor(), secondSelectedCard.getShape());
                // í•´ë‹¹ ì¹´ë“œ ê°ì²´ì— í•´ë‹¹í•˜ëŠ” íƒœê·¸ì˜ ì†ì„± ì—…ë°ì´íŠ¸(ë’·ë©´ìœ¼ë¡œ ì„¤ì •)  
                const cardAreaChildren = document.getElementById("cardArea").children;   

                // ì„ íƒí•œ ë‘ ì¹´ë“œì˜ ìˆ«ì, ì»¬ëŸ¬, ëª¨ì–‘ ì•ˆ ë§ì€ ê²½ìš°
                if (amount === 0) { 
                    // ëª¨ë“  íŒíŠ¸ ì¹´ë“œì™€ ì„ íƒí•œ ë‘ì¹´ë“œê°€ ì„œë¡œ ì¼ì¹˜í•˜ëŠ”ê²Œ í•˜ë‚˜ë„ ì—†ì„ ë•Œ, ëª¨ë‘ ë’¤ì§‘ê¸°
                    if (sameAmountWithHintForFirstCard === 0 && sameAmountWithHintForSecondCard === 0) {
                        firstSelectedCard.flip(); // ì²«ë²ˆì§¸ ì¹´ë“œ ë’¤ì§‘ê¸° 
                        secondSelectedCard.flip(); // ë‘ë²ˆì§¸ ì¹´ë“œ ë’¤ì§‘ê¸° 
                        for (child of cardAreaChildren) {
                            if (firstSelectedCard.isSameCardImageNumber(parseInt(child.getAttribute("data-number"))) || secondSelectedCard.isSameCardImageNumber(parseInt(child.getAttribute("data-number")))) {
                                child.setAttribute("src", `img/card_img/back.png`);
                            } 
                        }
                    } 
                    // ëª¨ë“  íŒíŠ¸ ì¹´ë“œì™€ ì„ íƒí•œ ë‘ ë²ˆì§¸ ì¹´ë“œê°€ ì„œë¡œ ì¼ì¹˜í•˜ëŠ” ê²Œ ì—†ì„ ë•Œ, ë‘ ë²ˆì§¸ ì¹´ë“œë§Œ ë’¤ì§‘ê¸°
                    else if (sameAmountWithHintForFirstCard !== 0 && sameAmountWithHintForSecondCard === 0) {
                        secondSelectedCard.flip();
                        for (child of cardAreaChildren) {
                            if (secondSelectedCard.isSameCardImageNumber(parseInt(child.getAttribute("data-number")))) {
                                child.setAttribute("src", `img/card_img/back.png`);
                            }
                        }
                    }
                    // ëª¨ë“  íŒíŠ¸ ì¹´ë“œì™€ ì„ íƒí•œ ì²« ë²ˆì§¸ ì¹´ë“œê°€ ì„œë¡œ ì¼ì¹˜í•˜ëŠ” ê²Œ ì—†ì„ ë•Œ, ì²« ë²ˆì§¸ ì¹´ë“œë§Œ ë’¤ì§‘ê¸°
                    else if (sameAmountWithHintForFirstCard === 0 && sameAmountWithHintForSecondCard !== 0) {
                        firstSelectedCard.flip();
                        for (child of cardAreaChildren) {
                            if (firstSelectedCard.isSameCardImageNumber(parseInt(child.getAttribute("data-number")))) {
                                child.setAttribute("src", `img/card_img/back.png`);
                            }
                        }
                    }
                } 

                return amount;
            }

            findSelectedCardByTag(selectedCardTag) {
                const selectedCardImageNumber = parseInt(selectedCardTag.getAttribute("data-number"));
                return this.#deck.findCard(selectedCardImageNumber);
            }

            showSelectedCard(selectedCardTag) {
                // í˜„ì¬ í”Œë ˆì´ì–´ì˜ ê²Œì„ íšŸìˆ˜ê°€ 0ì¸ ê²½ìš° 
                if (!this.#currentPlayer.isLeftCount()) return; 
                // í˜„ì¬ í”Œë ˆì´ì–´ê°€ ì„ íƒí•œ íƒœê·¸ì— í•´ë‹¹í•˜ëŠ” ì¹´ë“œ ê°ì²´ ì°¾ê¸° 
                const currentPlayerSelectedCard = this.findSelectedCardByTag(selectedCardTag); 
                
                // ì¹´ë“œ ê°ì²´ê°€ ì•ë©´ì´ë©´ ìŠ¤í‚µ 
                if (currentPlayerSelectedCard.isFront()) return; 
                // ì¹´ë“œ ê°ì²´ê°€ ë’·ë©´ì´ì˜€ìœ¼ë©´, ëŒë¦¬ê¸° 
                currentPlayerSelectedCard.flip(); 
                // ì¹´ë“œ íƒœê·¸ì˜ ì†ì„± ì—…ë°ì´íŠ¸ 
                selectedCardTag.setAttribute("src", `img/card_img/${currentPlayerSelectedCard.getCardImageNumber()}.png`);
            
            }

            getGameResult() {
                if (this.#firstPlayer.isLeftCount() || this.#secondPlayer.isLeftCount()) { 
                    alert(`ì•„ì§ í”Œë ˆì´ì–´ì˜ íŒìˆ˜ê°€ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤. ëª¨ë“  í”Œë ˆì´ì–´ì˜ íŒìˆ˜ ë‹¤ ëë‚˜ë©´ ìš”ì²­í•´ì£¼ì„¸ìš”.ğŸ”Š`);
                    return false;
                }

                // ê²Œì„ ê²°ê³¼ë¥¼ ìˆ«ìë¡œ ë°˜í™˜
                const result = this.#firstPlayer.isWinner(this.#secondPlayer.getScore()); 
                // ìˆ«ì ê²°ê³¼ë¥¼ ë¬¸ì ê²°ê³¼ë¡œ ë°˜í™˜í•´ì„œ ì¶œë ¥ 
                this.notifyGameResult(result); 
                return true;
            }

            notifyGameResult(result) {
                // ë‘ í”Œë ˆì´ì–´ê°€ ìƒì„±ëœ ê²½ìš° ê²Œì„ ê²°ê³¼ ë©”ì‹œì§€ ìƒì„± 
                if (this.#firstPlayer !== null && this.#secondPlayer !== null) {
                    this.#gameMessage.createAllMessage();
                }

                // ê²Œì„ ê²°ê³¼ ìˆ«ìë¥¼ ë©”ì‹œì§€ë¡œ ë°˜í™˜
                const resultMessage = this.#gameMessage.translateGameMessage(result);
                // ê²Œì„ ê²°ê³¼ ë©”ì‹œì§€ ì•Œë¦¼ 
                alert(resultMessage);                
            }

            getCurrentPlayerName() {
                return this.#currentPlayer.getName();
            }

            resetAllPlayer() {
                alert("í”Œë ˆì´ì–´ì˜ ê¸°ë¡ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.ğŸ’¥");
                // ì²« ë²ˆì§¸ì™€ ë‘ ë²ˆì§¸ ê·¸ë¦¬ê³  í˜„ì¬ í”Œë ˆì´ì–´ ì‚­ì œ 
                this.#firstPlayer = null; 
                this.#secondPlayer = null; 
                this.#currentPlayer = null;
            }
        }

    </script>
</body>
</html>